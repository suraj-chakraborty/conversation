!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(zd){"use strict";try{(function(){function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,e=t(zd);function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}(Ee=u=u||{})[Ee.DEBUG=0]="DEBUG",Ee[Ee.VERBOSE=1]="VERBOSE",Ee[Ee.INFO=2]="INFO",Ee[Ee.WARN=3]="WARN",Ee[Ee.ERROR=4]="ERROR",Ee[Ee.SILENT=5]="SILENT";function n(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=a[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}var r={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},i=u.INFO,a=((Ie={})[u.DEBUG]="log",Ie[u.VERBOSE]="log",Ie[u.INFO]="info",Ie[u.WARN]="warn",Ie[u.ERROR]="error",Ie),o=(Object.defineProperty(c.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in u))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),c.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?r[t]:t},Object.defineProperty(c.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),c.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.DEBUG],t)),this._logHandler.apply(this,s([this,u.DEBUG],t))},c.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.VERBOSE],t)),this._logHandler.apply(this,s([this,u.VERBOSE],t))},c.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.INFO],t)),this._logHandler.apply(this,s([this,u.INFO],t))},c.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.WARN],t)),this._logHandler.apply(this,s([this,u.WARN],t))},c.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.ERROR],t)),this._logHandler.apply(this,s([this,u.ERROR],t))},c);function c(t){this.name=t,this._logLevel=i,this._logHandler=n,this._userLogHandler=null}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function y(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((a=a.apply(t,s||[])).next())})}function v(n,r){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d,g="FirebaseError",m=(f(w,d=Error),w);function w(t,e,n){e=d.call(this,e)||this;return e.code=t,e.customData=n,e.name=g,Object.setPrototypeOf(e,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,b.prototype.create),e}var b=(_.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(E,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new m(o,t,i)},_);function _(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var E=/\{\$([^}]+)}/g,I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function T(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var A,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O={},S=N||self;function R(){}function k(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function L(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var D="closure_uid_"+(1e9*Math.random()>>>0),P=0;function C(t,e,n){return t.call.apply(t.bind,arguments)}function U(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function V(t,e,n){return(V=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:U).apply(null,arguments)}function x(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function M(){return Date.now()}function j(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function q(){this.j=this.j,this.i=this.i}q.prototype.j=!1,q.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,D)&&t[D]||(t[D]=++P))},q.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function G(){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function H(t){return/^[\s\xa0]*$/.test(t)}var W,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Q(t,e){return-1!=t.indexOf(e)}function K(t,e){return t<e?-1:e<t?1:0}t:{var X=S.navigator;if(X){X=X.userAgent;if(X){W=X;break t}}W=""}function J(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function $(t){var e,n={};for(e in t)n[e]=t[e];return n}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Z.length;i++)e=Z[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function et(t){return et[" "](t),t}et[" "]=R;var nt,rt=Q(W,"Opera"),it=Q(W,"Trident")||Q(W,"MSIE"),ot=Q(W,"Edge"),st=ot||it,ut=Q(W,"Gecko")&&!(Q(W.toLowerCase(),"webkit")&&!Q(W,"Edge"))&&!(Q(W,"Trident")||Q(W,"MSIE"))&&!Q(W,"Edge"),at=Q(W.toLowerCase(),"webkit")&&!Q(W,"Edge");function ct(){var t=S.document;return t?t.documentMode:void 0}t:{var ht="",ft=(ft=W,ut?/rv:([^\);]+)(\)|;)/.exec(ft):ot?/Edge\/([\d\.]+)/.exec(ft):it?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ft):at?/WebKit\/(\S+)/.exec(ft):rt?/(?:Version)[ \/]?(\S+)/.exec(ft):void 0);if(ft&&(ht=ft?ft[1]:""),it){ft=ct();if(null!=ft&&ft>parseFloat(ht)){nt=String(ft);break t}}nt=ht}var lt={};function pt(u){return t=u,e=function(){for(var t=0,e=Y(String(nt)).split("."),n=Y(String(u)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=K(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||K(0==o[2].length,0==s[2].length)||K(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=lt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var dt=S.document&&it?ct()||(parseInt(nt,10)||void 0):void 0,yt=!it||9<=Number(dt),vt=it&&!pt("9"),gt=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{S.addEventListener("test",R,e),S.removeEventListener("test",R,e)}catch(t){}return t}();function mt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function wt(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ut){t:{try{et(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}mt.prototype.b=function(){this.defaultPrevented=!0},j(wt,mt);var bt={2:"touch",3:"pen",4:"mouse"};wt.prototype.b=function(){wt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var _t="closure_listenable_"+(1e6*Math.random()|0),Et=0;function It(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Et,this.Y=this.Z=!1}function Tt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function At(t){this.src=t,this.a={},this.b=0}function Nt(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=F(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Tt(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Ot(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}At.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ot(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new It(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var St="closure_lm_"+(1e6*Math.random()|0),Rt={};function kt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Mt(r);return e&&e[_t]?e.wa(n,r,L(i)?!!i.capture:!!i,o):Lt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kt(t,e[o],n,r,i);return null}return n=Mt(n),t&&t[_t]?t.va(e,n,L(r)?!!r.capture:!!r,i):Lt(t,e,n,!1,r,i)}function Lt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=L(i)?!!i.capture:!!i;if(s&&!yt)return null;var u,a,c=Vt(t);if(c||(t[St]=c=new At(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(u=Ut,r=a=yt?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)gt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dt(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[_t]?Nt(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vt(e))?(Nt(n,t),0==n.b&&(n.src=null,e[St]=null)):Tt(t)))}function Pt(t){return t in Rt?Rt[t]:Rt[t]="on"+t}function Ct(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Dt(t),n.call(r,e)}function Ut(t,e){if(t.Y)return!0;if(yt)return Ct(t,new wt(e,this));if(!e)t:{e=["window","event"];for(var n=S,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ct(t,e=new wt(e,this))}function Vt(t){return(t=t[St])instanceof At?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(e){return"function"==typeof e?e:(e[xt]||(e[xt]=function(t){return e.handleEvent(t)}),e[xt])}function jt(){q.call(this),this.c=new At(this),(this.J=this).C=null}function qt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new mt(e,t):e instanceof mt?e.target=e.target||t:(s=e,tt(e=new mt(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Ft(o,r,!0,e)&&s;if(s=Ft(o=e.a=t,r,!0,e)&&s,s=Ft(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Ft(o=e.a=n[i],r,!1,e)&&s}function Ft(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.Y&&a.capture==n&&(s=a.listener,u=a.ca||a.src,a.Z&&Nt(t.c,a),i=!1!==s.call(u,r)&&i)}return i&&!r.defaultPrevented}j(jt,q),jt.prototype[_t]=!0,(A=jt.prototype).addEventListener=function(t,e,n,r){kt(this,t,e,n,r)},A.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=L(i)?!!i.capture:!!i,r=Mt(r),e&&e[_t]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Ot(s=e.a[n],r,i,o))&&(Tt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Vt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ot(n,r,i,o)),(r=-1<e?n[e]:null)&&Dt(r))}(this,t,e,n,r)},A.G=function(){if(jt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Tt(n[r]);delete e.a[t],e.b--}}this.C=null},A.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},A.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Bt=S.JSON.stringify;function Gt(){this.b=this.a=null}var zt,Ht=(Wt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Wt(function(){return new Yt},function(t){t.reset()}));function Wt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Yt(){this.next=this.b=this.a=null}function Qt(t,e){var n;zt||(n=S.Promise.resolve(void 0),zt=function(){n.then(Jt)}),Kt||(zt(),Kt=!0),Xt.add(t,e)}Gt.prototype.add=function(t,e){var n=Ht.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Yt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Kt=!(Yt.prototype.reset=function(){this.next=this.b=this.a=null}),Xt=new Gt;function Jt(){for(var t,e;n=e=void 0,n=null,(e=Xt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){S.setTimeout(function(){throw t},0)}(t)}var n=Ht;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Kt=!1}function $t(t,e){jt.call(this),this.b=t||1,this.a=e||S,this.f=V(this.Za,this),this.g=M()}function Zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function te(t,e,n){if("function"==typeof t)n&&(t=V(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=V(t.handleEvent,t)}return 2147483647<Number(e)?-1:S.setTimeout(t,e||0)}j($t,jt),(A=$t.prototype).aa=!1,A.M=null,A.Za=function(){var t;this.aa&&(0<(t=M()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),qt(this,"tick"),this.aa&&(Zt(this),this.start())))},A.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=M())},A.G=function(){$t.X.G.call(this),Zt(this),delete this.a};var ee,ne,re,ie=(I(ne=se,re=ee=q),ne.prototype=null===re?Object.create(re):(oe.prototype=re.prototype,new oe),se.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=te(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},se.prototype.G=function(){ee.prototype.G.call(this),this.a&&(S.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},se);function oe(){this.constructor=ne}function se(t,e){var n=ee.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function ue(t){q.call(this),this.b=t,this.a={}}j(ue,q);var ae=[];function ce(t,e,n,r){Array.isArray(n)||(n&&(ae[0]=n.toString()),n=ae);for(var i=0;i<n.length;i++){var o=kt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function he(t){J(t.a,function(t,e){this.a.hasOwnProperty(e)&&Dt(t)},t),t.a={}}function fe(){this.a=!0}function le(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return Bt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ue.prototype.G=function(){ue.X.G.call(this),he(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fe.prototype.info=function(){};var pe={},de=null;function ye(){return de=de||new jt}function ve(t){mt.call(this,pe.Fa,t)}function ge(t){var e=ye();qt(e,new ve(e))}function me(t,e){mt.call(this,pe.STAT_EVENT,t),this.stat=e}function we(t){var e=ye();qt(e,new me(e,t))}function be(t){mt.call(this,pe.Ga,t)}function _e(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){t()},e)}pe.Fa="serverreachability",j(ve,mt),pe.STAT_EVENT="statevent",j(me,mt),pe.Ga="timingevent",j(be,mt);var Ee={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ie={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Te(){}function Ae(t){var e;return(e=t.a)||(e=t.a={}),e}function Ne(){}Te.prototype.a=null;var Oe,N={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Se(){mt.call(this,"d")}function Re(){mt.call(this,"c")}function ke(){}function Le(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ue(this),this.P=De,t=st?125:void 0,this.R=new $t(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}j(Se,mt),j(Re,mt),j(ke,Te),Oe=new ke;var De=45e3,Pe={},Ce={};function Ue(t,e,n){t.H=1,t.i=nn(Xe(e)),t.j=n,t.I=!0,Ve(t,null)}function Ve(t,e){t.u=M(),Me(t),t.l=Xe(t.i);var s,u,a,c,h,f,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vn(n.b,"t",r),t.D=0,t.a=cr(t.g,t.g.C?e:null),0<t.O&&(t.F=new ie(V(t.Ca,t,t.a),t.O)),ce(t.J,t.a,"readystatechange",t.Xa),e=t.B?$(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ge(1),s=t.c,u=t.m,a=t.l,c=t.f,h=t.S,f=t.j,s.info(function(){if(s.a)if(f)for(var t="",e=f.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=f;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+u+"\n"+a+"\n"+t})}function xe(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var u=(u=n,o=i=void 0,i=(r=t).D,-1==(o=u.indexOf("\n",i))?Ce:(i=Number(u.substring(i,o)),isNaN(i)?Pe:(o+=1)+i>u.length?Ce:(u=u.substr(o,i),r.D=o+i,u)));if(u==Ce){4==e&&(t.h=4,we(14),s=!1),le(t.c,t.f,null,"[Incomplete Response]");break}if(u==Pe){t.h=4,we(15),le(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}le(t.c,t.f,u,null),Ge(t,u)}4==e&&0==n.length&&(t.h=1,we(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),er(e),e.F=!0,we(11))):(le(t.c,t.f,n,"[Invalid Chunked Response]"),Be(t),Fe(t))}function Me(t){t.T=M()+t.P,je(t,t.P)}function je(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=_e(V(t.Va,t),e)}function qe(t){t.o&&(S.clearTimeout(t.o),t.o=null)}function Fe(t){0==t.g.v||t.A||ir(t.g,t)}function Be(t){qe(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zt(t.R),he(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ge(t,e){try{var n,r,i,o,s,u=t.g;if(0!=u.v&&(u.a==t||In(u.b,t)))if(u.I=t.N,!t.C&&In(u.b,t)&&3==u.v){try{var a=u.ka.a.parse(e)}catch(t){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0]){t:if(!u.j){if(u.a){if(!(u.a.u+3e3<t.u))break t;rr(u),Wn(u)}tr(u),we(18)}}else u.oa=c[1],0<u.oa-u.P&&c[2]<37500&&u.H&&0==u.o&&!u.m&&(u.m=_e(V(u.Sa,u),6e3));if(En(u.b)<=1&&u.ea){try{u.ea()}catch(t){}u.ea=void 0}}else sr(u,11)}else if(!t.C&&u.a!=t||rr(u),!H(e))for(e=a=u.ka.a.parse(e),a=0;a<e.length;a++){c=e[a],u.P=c[0],c=c[1],2==u.v?"c"==c[0]?(u.J=c[1],u.ga=c[2],null!=(r=c[3])&&(u.ha=r,u.c.info("VER="+u.ha)),null!=(o=c[4])&&(u.pa=o,u.c.info("SVER="+u.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,u.D=n,u.c.info("backChannelRequestTimeoutMs_="+n)),n=u,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Q(r,"spdy")||Q(r,"quic")||Q(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Tn(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,en(n.B,n.A,s))),u.v=3,u.f&&u.f.ta(),u.U&&(u.N=M()-t.u,u.c.info("Handshake RTT: "+u.N+"ms")),i=t,(n=u).la=ar(n,n.C?n.ga:null,n.fa),i.C?(An(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(qe(o),Me(o)),n.a=i):Zn(n),0<u.g.length&&Kn(u)):"stop"!=c[0]&&"close"!=c[0]||sr(u,7):3==u.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?sr(u,7):Hn(u):"noop"!=c[0]&&u.f&&u.f.sa(c),u.o=0)}ge(4)}catch(t){}}function ze(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(k(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(k(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(k(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function He(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof He)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function We(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ye(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Ye(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ye(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(A=Le.prototype).setTimeout=function(t){this.P=t},A.Xa=function(t){t=t.target;var e=this.F;e&&3==Fn(t)?e.f():this.Ca(t)},A.Ca=function(t){try{if(t==this.a)t:{var e=Fn(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!st&&!this.a.$())){this.A||4!=e||7==n||ge(8==n||r<=0?3:2),qe(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,u=this.m,a=this.l,c=this.f,h=this.S,f=e,l=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+u+"\n"+a+"\n"+f+" "+l}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,we(12),Be(this),Fe(this);break t}le(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ge(this,s)}this.I?(xe(this,e,n),st&&this.b&&3==e&&(ce(this.J,this.R,"tick",this.Wa),this.R.start())):(le(this.c,this.f,n,null),Ge(this,n)),4==e&&Be(this),this.b&&!this.A&&(4==e?ir(this.g,this):(this.b=!1,Me(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,we(12)):(this.h=0,we(13)),Be(this),Fe(this)}}}catch(t){}var u,a,c,h,f,l},A.Wa=function(){var t,e;this.a&&(t=Fn(this.a),e=this.a.$(),this.D<e.length&&(qe(this),xe(this,t,e),this.b&&4!=t&&Me(this)))},A.cancel=function(){this.A=!0,Be(this)},A.Va=function(){this.o=null;var t,e,n=M();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(ge(3),we(17)),Be(this),this.h=2,Fe(this)):je(this,this.T-n)},(A=He.prototype).K=function(){We(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},A.L=function(){return We(this),this.a.concat()},A.get=function(t,e){return Ye(this.b,t)?this.b[t]:e},A.set=function(t,e){Ye(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},A.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ke(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ke?(this.a=void 0!==e?e:t.a,Je(this,t.f),this.j=t.j,$e(this,t.c),Ze(this,t.h),this.g=t.g,e=t.b,(n=new ln).c=e.c,e.a&&(n.a=new He(e.a),n.b=e.b),tn(this,n),this.i=t.i):t&&(n=String(t).match(Qe))?(this.a=!!e,Je(this,n[1]||"",!0),this.j=rn(n[2]||""),$e(this,n[3]||"",!0),Ze(this,n[4]),this.g=rn(n[5]||"",!0),tn(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!e,this.b=new ln(null,this.a))}function Xe(t){return new Ke(t)}function Je(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function $e(t,e,n){t.c=n?rn(e,!0):e}function Ze(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tn(t,e,n){var r,i;e instanceof ln?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(pn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dn(this,e),vn(this,n,t))},r)),r.f=i):(n||(e=on(e,hn)),t.b=new ln(e,t.a))}function en(t,e,n){t.b.set(e,n)}function nn(t){return en(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^M()).toString(36)),t}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,un,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(on(e,un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?cn:an,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",on(n,fn)),t.join("")};var un=/[#\/\?@]/g,an=/[#\?:]/g,cn=/[#\?]/g,hn=/[#\?@]/g,fn=/#/g;function ln(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function pn(n){n.a||(n.a=new He,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function dn(t,e){pn(t),e=gn(t,e),Ye(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ye((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&We(t)))}function yn(t,e){return pn(t),e=gn(t,e),Ye(t.a.b,e)}function vn(t,e,n){dn(t,e),0<n.length&&(t.c=null,t.a.set(gn(t,e),z(n)),t.b+=n.length)}function gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(A=ln.prototype).add=function(t,e){pn(this),this.c=null,t=gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},A.forEach=function(n,r){pn(this),this.a.forEach(function(t,e){B(t,function(t){n.call(r,t,e,this)},this)},this)},A.L=function(){pn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},A.K=function(t){pn(this);var e=[];if("string"==typeof t)yn(this,t)&&(e=G(e,this.a.get(gn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},A.set=function(t,e){return pn(this),this.c=null,yn(this,t=gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},A.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},A.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var mn=function(t,e){this.b=t,this.a=e};function wn(t){this.g=t||bn,t=S.PerformanceNavigationTiming?0<(t=S.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(S.ia&&S.ia.ya&&S.ia.ya()&&S.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var bn=10;function _n(t){return t.b||t.a&&t.a.size>=t.f}function En(t){return t.b?1:t.a?t.a.size:0}function In(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Tn(t,e){t.a?t.a.add(e):t.b=e}function An(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Nn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return z(t.c);var r=t.c;try{for(var i=T(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function On(){}function Sn(){this.a=new On}function Rn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}wn.prototype.cancel=function(){var e,t;if(this.c=Nn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=T(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},On.prototype.stringify=function(t){return S.JSON.stringify(t,void 0)},On.prototype.parse=function(t){return S.JSON.parse(t,void 0)};var kn=S.JSON.parse;function Ln(t){jt.call(this),this.headers=new He,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Dn,this.D=this.F=!1}j(Ln,jt);var Dn="",Pn=/^https?$/i,Cn=["POST","PUT"];function Un(t){return"content-type"==t.toLowerCase()}function Vn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,xn(t),jn(t)}function xn(t){t.u||(t.u=!0,qt(t,"complete"),qt(t,"error"))}function Mn(t){if(t.b&&void 0!==O&&(!t.s[1]||4!=Fn(t)||2!=t.W()))if(t.l&&4==Fn(t))te(t.za,0,t);else if(qt(t,"readystatechange"),4==Fn(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(Qe)[1]||null)&&S.self&&S.self.location&&(i=(r=S.self.location.protocol).substr(0,r.length-1)),n=!Pn.test(i?i.toLowerCase():"")),e=n);if(e)qt(t,"complete"),qt(t,"success");else{t.h=6;try{var u=2<Fn(t)?t.a.statusText:""}catch(o){u=""}t.f=u+" ["+t.W()+"]",xn(t)}}finally{jn(t)}}}function jn(t,e){if(t.a){qn(t);var n=t.a,r=t.s[0]?R:null;t.a=null,t.s=null,e||qt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function qn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(S.clearTimeout(t.m),t.m=null)}function Fn(t){return t.a?t.a.readyState:0}function Bn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",J(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):en(t,e,n))}function Gn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zn(t){this.pa=0,this.g=[],this.c=new fe,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Gn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Gn("baseRetryDelayMs",5e3,t),this.Ra=Gn("retryDelaySeedMs",1e4,t),this.Ma=Gn("forwardChannelMaxRetries",2,t),this.ma=Gn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wn(t&&t.concurrentRequestLimit),this.ka=new Sn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Hn(t){var e,n;Yn(t),3==t.v&&(e=t.R++,en(n=Xe(t.B),"SID",t.J),en(n,"RID",e),en(n,"TYPE","terminate"),Jn(t,n),(e=new Le(t,t.c,e,void 0)).H=2,e.i=nn(Xe(n)),n=!1,S.navigator&&S.navigator.sendBeacon&&(n=S.navigator.sendBeacon(e.i.toString(),"")),!n&&S.Image&&((new Image).src=e.i,n=!0),n||(e.a=cr(e.g,null),e.a.ba(e.i)),e.u=M(),Me(e)),ur(t)}function Wn(t){t.a&&(er(t),t.a.cancel(),t.a=null)}function Yn(t){Wn(t),t.j&&(S.clearTimeout(t.j),t.j=null),rr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&S.clearTimeout(t.h),t.h=null)}function Qn(t,e){t.g.push(new mn(t.Oa++,e)),3==t.v&&Kn(t)}function Kn(t){_n(t.b)||t.h||(t.h=!0,Qt(t.Ba,t),t.u=0)}function Xn(t,e){var n=e?e.f:t.R++,r=Xe(t.B);en(r,"SID",t.J),en(r,"RID",n),en(r,"AID",t.P),Jn(t,r),t.i&&t.l&&Bn(r,t.i,t.l),n=new Le(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=$n(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Tn(t.b,n),Ue(n,r,e)}function Jn(t,n){t.f&&ze({},function(t,e){en(n,e,t)})}function $n(t,e,n){n=Math.min(t.g.length,n);var r=t.f?V(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if((c-=o)<0)o=Math.max(0,i[a].b-100),u=!1;else try{!function(t,r,e){var i=e||"";try{ze(t,function(t,e){var n=t;L(t)&&(n=Bt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zn(t){t.a||t.j||(t.T=1,Qt(t.Aa,t),t.o=0)}function tr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=_e(V(t.Aa,t),or(t,t.o)),t.o++,1)}function er(t){null!=t.s&&(S.clearTimeout(t.s),t.s=null)}function nr(t){t.a=new Le(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Xe(t.la);en(e,"RID","rpc"),en(e,"SID",t.J),en(e,"CI",t.H?"0":"1"),en(e,"AID",t.P),Jn(t,e),en(e,"TYPE","xmlhttp"),t.i&&t.l&&Bn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=nn(Xe(e)),n.j=null,n.I=!0,Ve(n,t)}function rr(t){null!=t.m&&(S.clearTimeout(t.m),t.m=null)}function ir(t,e){var n,r=null;if(t.a==e){rr(t),er(t),t.a=null;var i=2}else{if(!In(t.b,e))return;r=e.s,An(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=M()-e.u,n=t.u,qt(i=ye(),new be(i)),Kn(t)):Zn(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(En(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)))return t.h=_e(V(t.Ba,t,e),or(t,t.u)),t.u++,1}}(t,e)||2==i&&tr(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:sr(t,5);break;case 4:sr(t,10);break;case 3:sr(t,6);break;default:sr(t,2)}}function or(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function sr(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=V(t.Ya,t),r||(r=new Ke("//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||Je(r,"https"),nn(r)),n=r.toString(),r=o,o=new fe,S.Image?((i=new Image).onload=x(Rn,o,i,"TestLoadImage: loaded",!0,r),i.onerror=x(Rn,o,i,"TestLoadImage: error",!1,r),i.onabort=x(Rn,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=x(Rn,o,i,"TestLoadImage: timeout",!1,r),S.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):we(2),t.v=0,t.f&&t.f.ra(e),ur(t),Yn(t)}function ur(t){t.v=0,t.I=-1,t.f&&(0==Nn(t.b).length&&0==t.g.length||(t.b.c.length=0,z(t.g),t.g.length=0),t.f.qa())}function ar(t,e,n){var r,i,o,s,u,a=(s=n)instanceof Ke?Xe(s):new Ke(s,void 0);return""!=a.c?(e&&$e(a,e+"."+a.c),Ze(a,a.h)):(u=S.location,r=u.protocol,i=e?e+"."+u.hostname:u.hostname,o=+u.port,s=n,u=new Ke(null,void 0),r&&Je(u,r),i&&$e(u,i),o&&Ze(u,o),s&&(u.g=s),a=u),t.V&&J(t.V,function(t,e){en(a,e,t)}),e=t.A,n=t.na,e&&n&&en(a,e,n),en(a,"VER",t.ha),Jn(t,a),a}function cr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t.Na)).F=t.C,e}function hr(){}function fr(){if(it&&!(10<=Number(dt)))throw Error("Environmental error: no available transport.")}function lr(t,e){jt.call(this),this.a=new zn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!H(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!H(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new yr(this)}function pr(t){Se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function dr(){Re.call(this),this.status=1}function yr(t){this.a=t}(A=Ln.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ae(this.H):Ae(Oe),this.a.onreadystatechange=V(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Vn(this,t)}t=n||"";var i,o=new He(this.headers);r&&ze(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Un,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=S.FormData&&t instanceof S.FormData,0<=F(Cn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{qn(this),0<this.o&&((this.D=(i=this.a,it&&pt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=V(this.xa,this)):this.m=te(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Vn(this,t)}},A.xa=function(){void 0!==O&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,qt(this,"timeout"),this.abort(8))},A.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,qt(this,"complete"),qt(this,"abort"),jn(this))},A.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),jn(this,!0)),Ln.X.G.call(this)},A.za=function(){this.j||(this.A||this.l||this.g?Mn(this):this.Ua())},A.Ua=function(){Mn(this)},A.W=function(){try{return 2<Fn(this)?this.a.status:-1}catch(t){return-1}},A.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},A.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),kn(e)}},A.ua=function(){return this.h},A.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(A=zn.prototype).ha=8,A.v=1,A.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Le(this,this.c,t,void 0),r=this.l;if(this.O&&(r?tt(r=$(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=$n(this,n,e),en(i=Xe(this.B),"RID",t),en(i,"CVER",22),this.A&&en(i,"X-HTTP-Session-Id",this.A),Jn(this,i),this.i&&r&&Bn(i,this.i,r),Tn(this.b,n),this.Ia&&en(i,"TYPE","init"),this.da?(en(i,"$req",e),en(i,"SID","null"),n.U=!0,Ue(n,i,null)):Ue(n,i,e),this.v=2}}else 3==this.v&&(t?Xn(this,t):0==this.g.length||_n(this.b)||Xn(this))},A.Aa=function(){var t;this.j=null,nr(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=_e(V(this.Ta,this),t))},A.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,we(10),Wn(this),nr(this))},A.Sa=function(){null!=this.m&&(this.m=null,Wn(this),tr(this),we(19))},A.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),we(2)):(this.c.info("Failed to ping google.com"),we(1))},(A=hr.prototype).ta=function(){},A.sa=function(){},A.ra=function(){},A.qa=function(){},A.Ja=function(){},fr.prototype.a=function(t,e){return new lr(t,e)},j(lr,jt),lr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;we(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ar(t,null,t.fa),Kn(t)},lr.prototype.close=function(){Hn(this.a)},lr.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Qn(this.a,e)):this.l?((e={}).__data__=Bt(t),Qn(this.a,e)):Qn(this.a,t)},lr.prototype.G=function(){this.a.f=null,delete this.f,Hn(this.a),delete this.a,lr.X.G.call(this)},j(pr,Se),j(dr,Re),j(yr,hr),yr.prototype.ta=function(){qt(this.a,"a")},yr.prototype.sa=function(t){qt(this.a,new pr(t))},yr.prototype.ra=function(t){qt(this.a,new dr)},yr.prototype.qa=function(){qt(this.a,"b")},fr.prototype.createWebChannel=fr.prototype.a,lr.prototype.send=lr.prototype.h,lr.prototype.open=lr.prototype.g,Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,Ie.COMPLETE="complete",(Ne.EventType=N).OPEN="a",N.CLOSE="b",N.ERROR="c",N.MESSAGE="d",jt.prototype.listen=jt.prototype.va,Ln.prototype.listenOnce=Ln.prototype.wa,Ln.prototype.getLastError=Ln.prototype.Qa,Ln.prototype.getLastErrorCode=Ln.prototype.ua,Ln.prototype.getStatus=Ln.prototype.W,Ln.prototype.getResponseJson=Ln.prototype.Pa,Ln.prototype.getResponseText=Ln.prototype.$,Ln.prototype.send=Ln.prototype.ba;var vr=ye,gr=Ee,mr=Ie,wr=pe,br=10,_r=11,Er=Ne,Ir=Ln,Tr=new o("@firebase/firestore");function Ar(){return Tr.logLevel}function Nr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Tr.logLevel<=u.DEBUG&&(e=n.map(Rr),Tr.debug.apply(Tr,l(["Firestore (8.2.0): "+t],e)))}function Or(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Tr.logLevel<=u.ERROR&&(e=n.map(Rr),Tr.error.apply(Tr,l(["Firestore (8.2.0): "+t],e)))}function Sr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Tr.logLevel<=u.WARN&&(e=n.map(Rr),Tr.warn.apply(Tr,l(["Firestore (8.2.0): "+t],e)))}function Rr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function kr(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw Or(t),new Error(t)}function Lr(t){t||kr()}var Dr=(Pr.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Pr);function Pr(){}function Cr(t,e){return t<e?-1:e<t?1:0}function Ur(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}var Vr=(xr.fromBase64String=function(t){return new xr(atob(t))},xr.fromUint8Array=function(t){return new xr(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},xr.prototype.toBase64=function(){return t=this.i,btoa(t);var t},xr.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},xr.prototype.o=function(){return 2*this.i.length},xr.prototype.u=function(t){return Cr(this.i,t.i)},xr.prototype.isEqual=function(t){return this.i===t.i},xr);function xr(t){this.i=t}Vr.h=new Vr("");var Mr,jr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qr=(f(zr,Mr=Error),zr),Fr=(Gr.fromBase64String=function(t){try{return new Gr(Vr.fromBase64String(t))}catch(t){throw new qr(jr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},Gr.fromUint8Array=function(t){return new Gr(Vr.fromUint8Array(t))},Gr.prototype.toBase64=function(){return this.l.toBase64()},Gr.prototype.toUint8Array=function(){return this.l.toUint8Array()},Gr.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Gr.prototype.isEqual=function(t){return this.l.isEqual(t.l)},Gr),Br=function(t){this._=t};function Gr(t){this.l=t}function zr(t,e){var n=this;return(n=Mr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Hr(){if("undefined"==typeof Uint8Array)throw new qr(jr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wr(){if("undefined"==typeof atob)throw new qr(jr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Yr,Qr=(f(Jr,Yr=Br),Jr.fromBase64String=function(t){return Wr(),new Jr(Fr.fromBase64String(t))},Jr.fromUint8Array=function(t){return Hr(),new Jr(Fr.fromUint8Array(t))},Jr.prototype.toBase64=function(){return Wr(),this._.toBase64()},Jr.prototype.toUint8Array=function(){return Hr(),this._.toUint8Array()},Jr.prototype.isEqual=function(t){return this._.isEqual(t._)},Jr.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Jr),Kr=(Xr.prototype.T=function(){return null!=this.uid},Xr.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},Xr.prototype.isEqual=function(t){return t.uid===this.uid},Xr);function Xr(t){this.uid=t}function Jr(){return null!==Yr&&Yr.apply(this,arguments)||this}Kr.UNAUTHENTICATED=new Kr(null),Kr.m=new Kr("google-credentials-uid"),Kr.A=new Kr("first-party-uid");function $r(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t}var Zr=(pi.prototype.getToken=function(){return Promise.resolve(null)},pi.prototype.g=function(){},pi.prototype.V=function(t){(this.P=t)(Kr.UNAUTHENTICATED)},pi.prototype.p=function(){this.P=null},pi),ti=(li.prototype.getToken=function(){var e=this,n=this.D,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.D!==n?(Nr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Lr("string"==typeof t.accessToken),new $r(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},li.prototype.g=function(){this.forceRefresh=!0},li.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},li.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},li.prototype.C=function(){var t=this.auth&&this.auth.getUid();return Lr(null===t||"string"==typeof t),new Kr(t)},li),ei=(Object.defineProperty(fi.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),fi),ni=(hi.prototype.getToken=function(){return Promise.resolve(new ei(this.N,this.F))},hi.prototype.V=function(t){t(Kr.A)},hi.prototype.p=function(){},hi.prototype.g=function(){},hi),ri=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},ii=(Object.defineProperty(ci.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),ci.prototype.isEqual=function(t){return t instanceof ci&&t.projectId===this.projectId&&t.database===this.database},ci),oi=(ai.prototype.L=function(t){},ai.prototype.$=function(){},ai),si=(ui.prototype.L=function(t){this.W.push(t)},ui.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},ui.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},ui.prototype.q=function(){Nr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},ui.prototype.K=function(){Nr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},ui.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},ui);function ui(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}function ai(){}function ci(t,e){this.projectId=t,this.database=e||"(default)"}function hi(t,e){this.N=t,this.F=e}function fi(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Kr.A}function li(t){var e=this;this.v=null,this.currentUser=Kr.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then(function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)},function(){}))}function pi(){this.P=null}function di(t){return null==t}function yi(t){return 0===t&&1/t==-1/0}var vi,gi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};function mi(t){switch(t){case jr.OK:return kr(),0;case jr.CANCELLED:case jr.UNKNOWN:case jr.DEADLINE_EXCEEDED:case jr.RESOURCE_EXHAUSTED:case jr.INTERNAL:case jr.UNAVAILABLE:case jr.UNAUTHENTICATED:return;case jr.INVALID_ARGUMENT:case jr.NOT_FOUND:case jr.ALREADY_EXISTS:case jr.PERMISSION_DENIED:case jr.FAILED_PRECONDITION:case jr.ABORTED:case jr.OUT_OF_RANGE:case jr.UNIMPLEMENTED:case jr.DATA_LOSS:return 1;default:return kr(),0}}function wi(t){if(void 0===t)return Or("GRPC error has no .code"),jr.UNKNOWN;switch(t){case vi.OK:return jr.OK;case vi.CANCELLED:return jr.CANCELLED;case vi.UNKNOWN:return jr.UNKNOWN;case vi.DEADLINE_EXCEEDED:return jr.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return jr.RESOURCE_EXHAUSTED;case vi.INTERNAL:return jr.INTERNAL;case vi.UNAVAILABLE:return jr.UNAVAILABLE;case vi.UNAUTHENTICATED:return jr.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return jr.INVALID_ARGUMENT;case vi.NOT_FOUND:return jr.NOT_FOUND;case vi.ALREADY_EXISTS:return jr.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return jr.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return jr.FAILED_PRECONDITION;case vi.ABORTED:return jr.ABORTED;case vi.OUT_OF_RANGE:return jr.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return jr.UNIMPLEMENTED;case vi.DATA_LOSS:return jr.DATA_LOSS;default:return kr()}}(Ie=vi=vi||{})[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var bi,_i,Ei,Ii=(qi.prototype.Y=function(t){this.X=t},qi.prototype.Z=function(t){this.tt=t},qi.prototype.onMessage=function(t){this.et=t},qi.prototype.close=function(){this.J()},qi.prototype.send=function(t){this.H(t)},qi.prototype.nt=function(){this.X()},qi.prototype.st=function(t){this.tt(t)},qi.prototype.it=function(t){this.et(t)},qi),Ti=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},Ai=(ji.prototype.at=function(e,t,n,r){var i=this.ut(e,t);Nr("RestConnection","Sending: ",i,n);t={};return this.ht(t,r),this.lt(e,i,t,n).then(function(t){return Nr("RestConnection","Received: ",t),t},function(t){throw Sr("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},ji.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},ji.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},ji.prototype.ut=function(t,e){t=gi[t];return this.ot+"/v1/"+e+":"+t},f(Mi,Ei=ji),Mi.prototype.lt=function(o,e,s,u){return new Promise(function(n,r){var i=new Ir;i.listenOnce(mr.COMPLETE,function(){try{switch(i.getLastErrorCode()){case gr.NO_ERROR:var t=i.getResponseJson();Nr("Connection","XHR received:",JSON.stringify(t)),n(t);break;case gr.TIMEOUT:Nr("Connection",'RPC "'+o+'" timed out'),r(new qr(jr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var e=i.getStatus();Nr("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(jr).indexOf(e)?e:jr.UNKNOWN,r(new qr(e,t.message))):r(new qr(jr.UNKNOWN,"Server responded with status "+i.getStatus())):r(new qr(jr.UNAVAILABLE,"Connection failed."));break;default:kr()}}finally{Nr("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(u);i.send(e,"POST",t,s,15)})},Mi.prototype.ft=function(t,e){var n,r=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new fr,o=vr(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||(0<=(n=p()).indexOf("MSIE ")||0<=n.indexOf("Trident/"))||0<=p().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders");r=r.join("");Nr("Connection","Creating WebChannel: "+r,t);var s=i.createWebChannel(r,t),u=!1,a=!1,c=new Ii({H:function(t){a?Nr("Connection","Not sending because WebChannel is closed:",t):(u||(Nr("Connection","Opening WebChannel transport."),s.open(),u=!0),Nr("Connection","WebChannel sending:",t),s.send(t))},J:function(){return s.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(s,Er.EventType.OPEN,function(){a||Nr("Connection","WebChannel transport opened.")}),t(s,Er.EventType.CLOSE,function(){a||(a=!0,Nr("Connection","WebChannel transport closed"),c.st())}),t(s,Er.EventType.ERROR,function(t){a||(a=!0,Sr("Connection","WebChannel transport errored:",t),c.st(new qr(jr.UNAVAILABLE,"The operation could not be completed")))}),t(s,Er.EventType.MESSAGE,function(t){var e,n,r,i;a||(Lr(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Nr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=vi[r];if(void 0!==t)return wi(t)}(),i=n.message,void 0===t&&(t=jr.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,c.st(new qr(t,i)),s.close()):(Nr("Connection","WebChannel received:",e),c.it(e)))}),t(o,wr.STAT_EVENT,function(t){t.stat===br?Nr("Connection","Detected buffering proxy"):t.stat===_r&&Nr("Connection","Detected no buffering proxy")}),setTimeout(function(){c.nt()},0),c},Mi),Ni=(xi.now=function(){return xi.fromMillis(Date.now())},xi.fromDate=function(t){return xi.fromMillis(t.getTime())},xi.fromMillis=function(t){var e=Math.floor(t/1e3);return new xi(e,1e6*(t-1e3*e))},xi.prototype.toDate=function(){return new Date(this.toMillis())},xi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},xi.prototype.dt=function(t){return this.seconds===t.seconds?Cr(this.nanoseconds,t.nanoseconds):Cr(this.seconds,t.seconds)},xi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},xi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},xi.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},xi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},xi),Oi=(Vi.wt=function(t){return new Vi(t)},Vi.min=function(){return new Vi(new Ni(0,0))},Vi.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},Vi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Vi.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Vi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Vi.prototype.Tt=function(){return this.timestamp},Vi),o=(Object.defineProperty(Ui.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),Ui.prototype.isEqual=function(t){return 0===Ui.At(this,t)},Ui.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Ui?t.forEach(function(t){e.push(t)}):e.push(t),this.Rt(e)},Ui.prototype.limit=function(){return this.offset+this.length},Ui.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},Ui.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},Ui.prototype.gt=function(){return this.segments[this.offset]},Ui.prototype.Vt=function(){return this.get(this.length-1)},Ui.prototype.get=function(t){return this.segments[this.offset+t]},Ui.prototype.bt=function(){return 0===this.length},Ui.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ui.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ui.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Ui.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},Ui.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Ui),Si=(f(Ci,_i=o),Ci.prototype.Rt=function(t,e,n){return new Ci(t,e,n)},Ci.prototype.Ct=function(){return this.Dt().join("/")},Ci.prototype.toString=function(){return this.Ct()},Ci.xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new qr(jr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new Ci(n)},Ci.Nt=function(){return new Ci([])},Ci),Ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ki=(f(Pi,bi=o),Pi.prototype.Rt=function(t,e,n){return new Pi(t,e,n)},Pi.Ft=function(t){return Ri.test(t)},Pi.prototype.Ct=function(){return this.Dt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pi.Ft(t)||(t="`"+t+"`"),t}).join(".")},Pi.prototype.toString=function(){return this.Ct()},Pi.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},Pi.kt=function(){return new Pi(["__name__"])},Pi.Mt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new qr(jr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new qr(jr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qr(jr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new qr(jr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pi(e)},Pi.Nt=function(){return new Pi([])},Pi),Li=(Di.Lt=function(t){return new Di(Si.xt(t))},Di.$t=function(t){return new Di(Si.xt(t).Pt(5))},Di.prototype.Bt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Di.prototype.isEqual=function(t){return null!==t&&0===Si.At(this.path,t.path)},Di.prototype.toString=function(){return this.path.toString()},Di.At=function(t,e){return Si.At(t.path,e.path)},Di.qt=function(t){return t.length%2==0},Di.Ut=function(t){return new Di(new Si(t.slice()))},Di);function Di(t){this.path=t}function Pi(){return null!==bi&&bi.apply(this,arguments)||this}function Ci(){return null!==_i&&_i.apply(this,arguments)||this}function Ui(t,e,n){void 0===e?e=0:e>t.length&&kr(),void 0===n?n=t.length-e:n>t.length-e&&kr(),this.segments=t,this.offset=e,this.It=n}function Vi(t){this.timestamp=t}function xi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new qr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new qr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new qr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Mi(t){var e=this;return(e=Ei.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.k=t.k,e}function ji(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}function qi(t){this.H=t.H,this.J=t.J}function Fi(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Bi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var zi=(Wi.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},Wi.prototype.isEqual=function(t){return Ur(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Wi),Hi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(t){(this.fields=t).sort(ki.At)}function Yi(t){if(Lr(!!t),"string"!=typeof t)return{seconds:Qi(t.seconds),nanos:Qi(t.nanos)};var e=0,n=Hi.exec(t);Lr(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Qi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ki(t){return"string"==typeof t?Vr.fromBase64String(t):Vr.fromUint8Array(t)}function Xi(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ji(t){t=Yi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ni(t.seconds,t.nanos)}function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xi(t)?4:10:kr()}function Zi(r,i){var t,e=$i(r);if(e!==$i(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Ji(r).isEqual(Ji(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Yi(r.timestampValue),t=Yi(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Ki(r.bytesValue).isEqual(Ki(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Qi((t=r).geoPointValue.latitude)===Qi(e.geoPointValue.latitude)&&Qi(t.geoPointValue.longitude)===Qi(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Qi(t.integerValue)===Qi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Qi(t.doubleValue),e=Qi(e.doubleValue);return t===e?yi(t)===yi(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return Ur(r.arrayValue.values||[],i.arrayValue.values||[],Zi);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Fi(e)!==Fi(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Zi(e[t],n[t])))return!1;return!0}();default:return kr()}}function to(t,e){return void 0!==(t.values||[]).find(function(t){return Zi(t,e)})}function eo(t,e){var n,r,i=$i(t),o=$i(e);if(i!==o)return Cr(i,o);switch(i){case 0:return 0;case 1:return Cr(t.booleanValue,e.booleanValue);case 2:return n=e,r=Qi(t.integerValue||t.doubleValue),n=Qi(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return no(t.timestampValue,e.timestampValue);case 4:return no(Ji(t),Ji(e));case 5:return Cr(t.stringValue,e.stringValue);case 6:return function(t,e){t=Ki(t),e=Ki(e);return t.u(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cr(n[i],r[i]);if(0!==o)return o}return Cr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=Cr(Qi(i.latitude),Qi(r.latitude)))?n:Cr(Qi(i.longitude),Qi(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=eo(n[i],r[i]);if(o)return o}return Cr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Cr(r[s],o[s]);if(0!==u)return u;u=eo(n[r[s]],i[o[s]]);if(0!==u)return u}return Cr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw kr()}}function no(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cr(t,e);var n=Yi(t),t=Yi(e),e=Cr(n.seconds,t.seconds);return 0!==e?e:Cr(n.nanos,t.nanos)}function ro(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Yi(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ki(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Li.$t(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):kr();var e}(t)}function io(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function oo(t){return t&&"integerValue"in t}function so(t){return!!t&&"arrayValue"in t}function uo(t){return t&&"nullValue"in t}function ao(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function co(t){return t&&"mapValue"in t}var ho=(po.empty=function(){return new po({mapValue:{}})},po.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!co(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},po.prototype.isEqual=function(t){return Zi(this.proto,t.proto)},po),fo=(lo.prototype.set=function(t,e){return this.jt(t,e),this},lo.prototype.delete=function(t){return this.jt(t,null),this},lo.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===$i(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.Vt(),e)},lo.prototype.Gt=function(){var t=this.zt(ki.Nt(),this.Wt);return null!=t?new ho(t):this.Kt},lo.prototype.zt=function(r,t){var i=this,o=!1,e=this.Kt.field(r),s=co(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.zt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},lo);function lo(t){void 0===t&&(t=ho.empty()),this.Kt=t,this.Wt=new Map}function po(t){this.proto=t}var yo,vo,go,Ie=function(t,e){this.key=t,this.version=e},mo=(f(To,go=Ie),To.prototype.field=function(t){return this.Ht.field(t)},To.prototype.data=function(){return this.Ht},To.prototype.Yt=function(){return this.Ht.proto},To.prototype.isEqual=function(t){return t instanceof To&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},To.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(To.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),To),wo=(f(Io,vo=Ie),Io.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Io.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Io.prototype.isEqual=function(t){return t instanceof Io&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Io),bo=(f(Eo,yo=Ie),Eo.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Eo.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Eo.prototype.isEqual=function(t){return t instanceof Eo&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Eo),_o=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function Eo(){return null!==yo&&yo.apply(this,arguments)||this}function Io(t,e,n){var r=this;return(r=vo.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function To(t,e,n,r){var i=this;return(i=go.call(this,t,e)||this).Ht=n,i.Jt=!!r.Jt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Ao(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new _o(t,e,n,r,i,o,s)}function No(t){var e=t;return null===e.Xt&&(t=e.path.Ct(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.Ct()+t.op.toString()+ro(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.Ct()+t.dir}).join(","),di(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=es(e.startAt)),e.endAt&&(t+="|ub:",t+=es(e.endAt)),e.Xt=t),e.Xt}function Oo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,u=0;u<t.filters.length;u++)if(o=t.filters[u],s=e.filters[u],o.op!==s.op||!o.field.isEqual(s.field)||!Zi(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!is(t.startAt,e.startAt)&&is(t.endAt,e.endAt)}function So(t){return Li.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ro,ko=(f(Lo,Ro=function(){}),Lo.create=function(t,e,n){return t.Ot()?"in"===e||"not-in"===e?this.Zt(t,e,n):new Uo(t,e,n):"array-contains"===e?new Wo(t,n):"in"===e?new Yo(t,n):"not-in"===e?new Qo(t,n):"array-contains-any"===e?new Ko(t,n):new Lo(t,e,n)},Lo.Zt=function(t,e,n){return new("in"===e?Vo:xo)(t,n)},Lo.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.te(eo(t,this.value)):null!==t&&$i(this.value)===$i(t)&&this.te(eo(t,this.value))},Lo.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return kr()}},Lo.prototype.ee=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Lo);function Lo(t,e,n){var r=this;return(r=Ro.call(this)||this).field=t,r.op=e,r.value=n,r}var Do,Po,Co,Uo=(f(qo,Co=ko),qo.prototype.matches=function(t){t=Li.At(t.key,this.key);return this.te(t)},qo),Vo=(f(jo,Po=ko),jo.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},jo),xo=(f(Mo,Do=ko),Mo.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Mo);function Mo(t,e){var n=this;return(n=Do.call(this,t,"not-in",e)||this).keys=Fo(0,e),n}function jo(t,e){var n=this;return(n=Po.call(this,t,"in",e)||this).keys=Fo(0,e),n}function qo(t,e,n){var r=this;return(r=Co.call(this,t,e,n)||this).key=Li.$t(n.referenceValue),r}function Fo(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Li.$t(t.referenceValue)})}var Bo,Go,zo,Ho,Wo=(f(ts,Ho=ko),ts.prototype.matches=function(t){t=t.field(this.field);return so(t)&&to(t.arrayValue,this.value)},ts),Yo=(f(Zo,zo=ko),Zo.prototype.matches=function(t){t=t.field(this.field);return null!==t&&to(this.value.arrayValue,t)},Zo),Qo=(f($o,Go=ko),$o.prototype.matches=function(t){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!to(this.value.arrayValue,t)},$o),Ko=(f(Jo,Bo=ko),Jo.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!so(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return to(e.value.arrayValue,t)})},Jo),Xo=function(t,e){this.position=t,this.before=e};function Jo(t,e){return Bo.call(this,t,"array-contains-any",e)||this}function $o(t,e){return Go.call(this,t,"not-in",e)||this}function Zo(t,e){return zo.call(this,t,"in",e)||this}function ts(t,e){return Ho.call(this,t,"array-contains",e)||this}function es(t){return(t.before?"b":"a")+":"+t.position.map(ro).join(",")}var ns=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function rs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.Ot()?Li.At(Li.$t(s.referenceValue),n.key):eo(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function is(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Zi(t.position[n],e.position[n]))return!1;return!0}var os=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.se=null,this.ie=null,this.startAt,this.endAt};function ss(t){return new os(t)}function us(t){return!di(t.limit)&&"F"===t.limitType}function as(t){return!di(t.limit)&&"L"===t.limitType}function cs(t){return 0<t.ne.length?t.ne[0].field:null}function hs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function fs(t){return null!==t.collectionGroup}function ls(t){var e=t;if(null===e.se){e.se=[];var n=hs(e),t=cs(e);if(null!==n&&null===t)n.Ot()||e.se.push(new ns(n)),e.se.push(new ns(ki.kt(),"asc"));else{for(var r=!1,i=0,o=e.ne;i<o.length;i++){var s=o[i];e.se.push(s),s.field.Ot()&&(r=!0)}r||(n=0<e.ne.length?e.ne[e.ne.length-1].dir:"asc",e.se.push(new ns(ki.kt(),n)))}}return e.se}function ps(t){var e=t;if(!e.ie)if("F"===e.limitType)e.ie=Ao(e.path,e.collectionGroup,ls(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ls(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ns(o.field,s))}var u=e.endAt?new Xo(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Xo(e.startAt.position,!e.startAt.before):null;e.ie=Ao(e.path,e.collectionGroup,n,e.filters,e.limit,u,t)}return e.ie}function ds(t,e,n){return new os(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ys(t,e){return Oo(ps(t),ps(e))&&t.limitType===e.limitType}function vs(t){return No(ps(t))+"|lt:"+t.limitType}function gs(t){return"Query(target="+(e=ps(t),n=e.path.Ct(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.Ct()+" "+t.op+" "+ro(t.value)}).join(", ")+"]"),di(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.Ct()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+es(e.startAt)),e.endAt&&(n+=", endAt: "+es(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function ms(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.Bt(e.collectionGroup)&&e.path.vt(n):Li.qt(e.path)?e.path.isEqual(n):e.path.St(n))&&function(t){for(var e=0,n=i.ne;e<n.length;e++){var r=n[e];if(!r.field.Ot()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||rs(t.startAt,ls(t),n))&&(!t.endAt||!rs(t.endAt,ls(t),n)));var e,n}function ws(u){return function(t,e){for(var n=!1,r=0,i=ls(u);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.Ot()?Li.At(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?eo(n,t):kr()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return kr()}}(o,t,e);if(0!==s)return s;n=n||o.field.Ot()}return 0}}var bs=(_s.prototype.ce=function(t){return new _s(this.target,this.targetId,this.re,t,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},_s.prototype.ae=function(t,e){return new _s(this.target,this.targetId,this.re,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},_s.prototype.ue=function(t){return new _s(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,t,this.resumeToken)},_s);function _s(t,e,n,r,i,o,s){void 0===i&&(i=Oi.min()),void 0===o&&(o=Oi.min()),void 0===s&&(s=Vr.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Es(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yi(e)?"-0":e}}function Is(t){return{integerValue:""+t}}function Ts(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!yi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?Is(e):Es(t,e);var n}o=function(){this.le=void 0};function As(t,e){return t instanceof Ms?oo(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Ns,Os,Ss=(f(Ls,Os=o),Ls),Rs=(f(ks,Ns=o),ks);function ks(t){var e=this;return(e=Ns.call(this)||this).elements=t,e}function Ls(){return null!==Os&&Os.apply(this,arguments)||this}function Ds(t,e){for(var n=Fs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Zi(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Ps,Cs=(f(Us,Ps=o),Us);function Us(t){var e=this;return(e=Ps.call(this)||this).elements=t,e}function Vs(t,e){for(var n=Fs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Zi(t,e)})}(i[r]);return{arrayValue:{values:n}}}var xs,Ms=(f(js,xs=o),js);function js(t,e){var n=this;return(n=xs.call(this)||this).fe=t,n._e=e,n}function qs(t){return Qi(t.integerValue||t.doubleValue)}function Fs(t){return so(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Bs(t,e){this.field=t,this.transform=e}function Gs(t,e){this.version=t,this.transformResults=e}var zs=(Hs.de=function(){return new Hs},Hs.exists=function(t){return new Hs(void 0,t)},Hs.updateTime=function(t){return new Hs(t)},Object.defineProperty(Hs.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Hs.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Hs);function Hs(t,e){this.updateTime=t,this.exists=e}function Ws(t,e){return void 0!==t.updateTime?e instanceof mo&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof mo}Ie=function(){};function Ys(t,e,n,r){return t instanceof $s?function(t,e,n,r){if(!Ws(t.Ee,e))return e;var i=t.value;t.fieldTransforms&&(r=iu(t.fieldTransforms,n,e,r),i=ou(t.fieldTransforms,i,r));e=Ks(e);return new mo(t.key,e,i,{Jt:!0})}(t,e,r,n):t instanceof Zs?function(t,e,n,r){if(!Ws(t.Ee,e))return e;var i=Ks(e),r=nu(t,e,iu(t.fieldTransforms,n,e,r));return new mo(t.key,i,r,{Jt:!0})}(t,e,r,n):(e=e,Ws((t=t).Ee,e)?new wo(t.key,Oi.min()):e)}function Qs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Ur(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Rs&&e instanceof Rs||t instanceof Cs&&e instanceof Cs?Ur(t.elements,e.elements,Zi):t instanceof Ms&&e instanceof Ms?Zi(t._e,e._e):t instanceof Ss&&e instanceof Ss)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te));var n,r}function Ks(t){return t instanceof mo?t.version:Oi.min()}var Xs,Js,$s=(f(eu,Js=Ie),eu),Zs=(f(tu,Xs=Ie),tu);function tu(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Xs.call(this)||this).key=t,o.data=e,o.Te=n,o.Ee=r,o.fieldTransforms=i,o.type=1,o}function eu(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=Js.call(this)||this).key=t,i.value=e,i.Ee=n,i.fieldTransforms=r,i.type=0,i}function nu(t,e,n){var r,i,o;return i=t,e=r=e instanceof mo?e.data():ho.empty(),o=new fo(e),i.Te.fields.forEach(function(t){var e;t.bt()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.Gt(),ou(t.fieldTransforms,r,n)}function ru(t,e,n){var r=[];Lr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof mo&&(u=e.field(o.field)),r.push((o=s,s=u,u=n[i],o instanceof Rs?Ds(o,s):o instanceof Cs?Vs(o,s):u))}return r}function iu(t,e,n,r){for(var i,o=[],s=0,u=t;s<u.length;s++){var a=u[s],c=a.transform,h=null;n instanceof mo&&(h=n.field(a.field)),null===h&&r instanceof mo&&(h=r.field(a.field)),o.push((i=h,a=e,h=void 0,(c=c)instanceof Ss?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof Rs?Ds(c,i):c instanceof Cs?Vs(c,i):(c=As(h=c,i),i=qs(c)+qs(h._e),oo(c)&&oo(h._e)?Is(i):Es(h.fe,i))))}return o}function ou(t,e,n){for(var r=new fo(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}function su(t){this.count=t}var uu,au,cu=(f(mu,au=Ie),mu),hu=(f(gu,uu=Ie),gu),fu=(vu.prototype.Ie=function(t,e){return new vu(this.At,this.root.Ie(t,e,this.At).copy(null,null,pu.me,null,null))},vu.prototype.remove=function(t){return new vu(this.At,this.root.remove(t,this.At).copy(null,null,pu.me,null,null))},vu.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},vu.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},vu.prototype.bt=function(){return this.root.bt()},Object.defineProperty(vu.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),vu.prototype.Ae=function(){return this.root.Ae()},vu.prototype.Re=function(){return this.root.Re()},vu.prototype.Pe=function(t){return this.root.Pe(t)},vu.prototype.forEach=function(n){this.Pe(function(t,e){return n(t,e),!1})},vu.prototype.toString=function(){var n=[];return this.Pe(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},vu.prototype.ye=function(t){return this.root.ye(t)},vu.prototype.ge=function(){return new lu(this.root,null,this.At,!1)},vu.prototype.Ve=function(t){return new lu(this.root,t,this.At,!1)},vu.prototype.pe=function(){return new lu(this.root,null,this.At,!0)},vu.prototype.be=function(t){return new lu(this.root,t,this.At,!0)},vu),lu=(yu.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},yu.prototype.Ce=function(){return 0<this.Se.length},yu.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},yu),pu=(du.prototype.copy=function(t,e,n,r,i){return new du(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},du.prototype.bt=function(){return!1},du.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},du.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},du.prototype.min=function(){return this.left.bt()?this:this.left.min()},du.prototype.Ae=function(){return this.min().key},du.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},du.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},du.prototype.Fe=function(){if(this.left.bt())return du.EMPTY;var t=this;return t.left.Oe()||t.left.left.Oe()||(t=t.ke()),(t=t.copy(null,null,null,t.left.Fe(),null)).Ne()},du.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.bt()||r.left.Oe()||r.left.left.Oe()||(r=r.ke()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Oe()&&(r=r.Me()),r.right.bt()||r.right.Oe()||r.right.left.Oe()||(r=r.Le()),0===e(t,r.key)){if(r.right.bt())return du.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Fe())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ne()},du.prototype.Oe=function(){return this.color},du.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},du.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},du.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},du.prototype.$e=function(){var t=this.copy(null,null,du.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},du.prototype.Me=function(){var t=this.copy(null,null,du.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},du.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},du.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},du.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw kr();if(this.right.Oe())throw kr();var t=this.left.Ue();if(t!==this.right.Ue())throw kr();return t+(this.Oe()?0:1)},du);function du(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:du.RED,this.left=null!=r?r:du.EMPTY,this.right=null!=i?i:du.EMPTY,this.size=this.left.size+1+this.right.size}function yu(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}function vu(t,e){this.At=t,this.root=e||pu.EMPTY}function gu(t,e){var n=this;return(n=uu.call(this)||this).key=t,n.Ee=e,n.type=3,n.fieldTransforms=[],n}function mu(t,e){var n=this;return(n=au.call(this)||this).key=t,n.Ee=e,n.type=2,n.fieldTransforms=[],n}function wu(){this.size=0}pu.EMPTY=null,pu.RED=!0,pu.me=!1,pu.EMPTY=(Object.defineProperty(wu.prototype,"key",{get:function(){throw kr()},enumerable:!1,configurable:!0}),Object.defineProperty(wu.prototype,"value",{get:function(){throw kr()},enumerable:!1,configurable:!0}),Object.defineProperty(wu.prototype,"color",{get:function(){throw kr()},enumerable:!1,configurable:!0}),Object.defineProperty(wu.prototype,"left",{get:function(){throw kr()},enumerable:!1,configurable:!0}),Object.defineProperty(wu.prototype,"right",{get:function(){throw kr()},enumerable:!1,configurable:!0}),wu.prototype.copy=function(t,e,n,r,i){return this},wu.prototype.Ie=function(t,e,n){return new pu(t,e)},wu.prototype.remove=function(t,e){return this},wu.prototype.bt=function(){return!0},wu.prototype.Pe=function(t){return!1},wu.prototype.ye=function(t){return!1},wu.prototype.Ae=function(){return null},wu.prototype.Re=function(){return null},wu.prototype.Oe=function(){return!1},wu.prototype.qe=function(){return!0},wu.prototype.Ue=function(){return 0},new wu);var bu=(Tu.prototype.has=function(t){return null!==this.data.get(t)},Tu.prototype.first=function(){return this.data.Ae()},Tu.prototype.last=function(){return this.data.Re()},Object.defineProperty(Tu.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Tu.prototype.indexOf=function(t){return this.data.indexOf(t)},Tu.prototype.forEach=function(n){this.data.Pe(function(t,e){return n(t),!1})},Tu.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(0<=this.At(r.key,t[1]))return;e(r.key)}},Tu.prototype.Ke=function(t,e){for(var n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},Tu.prototype.We=function(t){t=this.data.Ve(t);return t.Ce()?t.De().key:null},Tu.prototype.ge=function(){return new _u(this.data.ge())},Tu.prototype.Ve=function(t){return new _u(this.data.Ve(t))},Tu.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},Tu.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Tu.prototype.bt=function(){return this.data.bt()},Tu.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Tu.prototype.isEqual=function(t){if(!(t instanceof Tu))return!1;if(this.size!==t.size)return!1;for(var e=this.data.ge(),n=t.data.ge();e.Ce();){var r=e.De().key,i=n.De().key;if(0!==this.At(r,i))return!1}return!0},Tu.prototype.Dt=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Tu.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Tu.prototype.copy=function(t){var e=new Tu(this.At);return e.data=t,e},Tu),_u=(Iu.prototype.De=function(){return this.Ge.De().key},Iu.prototype.Ce=function(){return this.Ge.Ce()},Iu),Eu=new fu(Li.At);function Iu(t){this.Ge=t}function Tu(t){this.At=t,this.data=new fu(this.At)}var Au=new fu(Li.At);var Nu=new fu(Li.At);var Ou=new bu(Li.At);function Su(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ou,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Ru=new bu(Cr);var ku=(Wu.Je=function(t){return new Wu(t.At)},Wu.prototype.has=function(t){return null!=this.ze.get(t)},Wu.prototype.get=function(t){return this.ze.get(t)},Wu.prototype.first=function(){return this.He.Ae()},Wu.prototype.last=function(){return this.He.Re()},Wu.prototype.bt=function(){return this.He.bt()},Wu.prototype.indexOf=function(t){t=this.ze.get(t);return t?this.He.indexOf(t):-1},Object.defineProperty(Wu.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),Wu.prototype.forEach=function(n){this.He.Pe(function(t,e){return n(t),!1})},Wu.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},Wu.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},Wu.prototype.isEqual=function(t){if(!(t instanceof Wu))return!1;if(this.size!==t.size)return!1;for(var e=this.He.ge(),n=t.He.ge();e.Ce();){var r=e.De().key,i=n.De().key;if(!r.isEqual(i))return!1}return!0},Wu.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Wu.prototype.copy=function(t,e){var n=new Wu;return n.At=this.At,n.ze=t,n.He=e,n},Wu),Lu=(Hu.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);!n||0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):kr()},Hu.prototype.Xe=function(){var n=[];return this.Ye.Pe(function(t,e){n.push(e)}),n},Hu),Du=(zu.sn=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new zu(t,e,ku.Je(e),i,n,r,!0,!1)},Object.defineProperty(zu.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),zu.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&ys(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},zu),Pu=(Gu.un=function(t,e){var n=new Map;return n.set(t,Cu.hn(t,e)),new Gu(Oi.min(),n,Ru,Eu,Su())},Gu),Cu=(Bu.hn=function(t,e){return new Bu(Vr.h,e,Su(),Su(),Su())},Bu),Uu=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},Vu=function(t,e){this.targetId=t,this.Tn=e},xu=function(t,e,n,r){void 0===n&&(n=Vr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Mu=(Object.defineProperty(Fu.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(Fu.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(Fu.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(Fu.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),Fu.prototype.Vn=function(t){0<t.o()&&(this.Pn=!0,this.An=t)},Fu.prototype.pn=function(){var n=Su(),r=Su(),i=Su();return this.mn.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:kr()}}),new Cu(this.An,this.Rn,n,r,i)},Fu.prototype.bn=function(){this.Pn=!1,this.mn=Qu()},Fu.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},Fu.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},Fu.prototype.Dn=function(){this.In+=1},Fu.prototype.Cn=function(){--this.In},Fu.prototype.xn=function(){this.Pn=!0,this.Rn=!0},Fu),ju=(qu.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof mo?this.$n(r,t.En):t.En instanceof wo&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},qu.prototype.qn=function(n){var r=this;this.Un(n,function(t){var e=r.Qn(t);switch(n.state){case 0:r.Kn(t)&&e.Vn(n.resumeToken);break;case 1:e.Cn(),e.yn||e.bn(),e.Vn(n.resumeToken);break;case 2:e.Cn(),e.yn||r.removeTarget(t);break;case 3:r.Kn(t)&&(e.xn(),e.Vn(n.resumeToken));break;case 4:r.Kn(t)&&(r.Wn(t),e.Vn(n.resumeToken));break;default:kr()}})},qu.prototype.Un=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Fn.forEach(function(t,e){r.Kn(e)&&n(e)})},qu.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,t=this.Gn(e);t&&(So(t=t.target)?0===n?(t=new Li(t.path),this.Bn(e,t,new wo(t,Oi.min()))):Lr(1===n):this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e)))},qu.prototype.Hn=function(r){var i=this,o=new Map;this.Fn.forEach(function(t,e){var n=i.Gn(e);n&&(t.ln&&So(n.target)&&(n=new Li(n.target.path),null!==i.On.get(n)||i.Jn(e,n)||i.Bn(e,n,new wo(n,r))),t.gn&&(o.set(e,t.pn()),t.bn()))});var s=Su();this.kn.forEach(function(t,e){var n=!0;e.Ke(function(t){t=i.Gn(t);return!t||2===t.re||(n=!1)}),n&&(s=s.add(t))});var t=new Pu(r,o,this.Mn,this.On,s);return this.On=Eu,this.kn=Yu(),this.Mn=new bu(Cr),t},qu.prototype.$n=function(t,e){var n;this.Kn(t)&&(n=this.Jn(t,e.key)?2:0,this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t)))},qu.prototype.Bn=function(t,e,n){var r;this.Kn(t)&&(r=this.Qn(t),this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n)))},qu.prototype.removeTarget=function(t){this.Fn.delete(t)},qu.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},qu.prototype.Dn=function(t){this.Qn(t).Dn()},qu.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new Mu,this.Fn.set(t,e)),e},qu.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new bu(Cr),this.kn=this.kn.Ie(t,e)),e},qu.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||Nr("WatchChangeAggregator","Detected inactive target",t),e},qu.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},qu.prototype.Wn=function(e){var n=this;this.Fn.set(e,new Mu),this.Nn.Xn(e).forEach(function(t){n.Bn(e,t,null)})},qu.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},qu);function qu(t){this.Nn=t,this.Fn=new Map,this.On=Eu,this.kn=Yu(),this.Mn=new bu(Cr)}function Fu(){this.In=0,this.mn=Qu(),this.An=Vr.h,this.Rn=!1,this.Pn=!0}function Bu(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}function Gu(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}function zu(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=u}function Hu(){this.Ye=new fu(Li.At)}function Wu(n){this.At=n?function(t,e){return n(t,e)||Li.At(t.key,e.key)}:function(t,e){return Li.At(t.key,e.key)},this.ze=Au,this.He=new fu(this.At)}function Yu(){return new fu(Li.At)}function Qu(){return new fu(Li.At)}var Ku={asc:"ASCENDING",desc:"DESCENDING"},Xu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ju=function(t,e){this.O=t,this.he=e};function $u(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zu(t,e){return t.he?e.toBase64():e.toUint8Array()}function ta(t){return Lr(!!t),Oi.wt((t=Yi(t),new Ni(t.seconds,t.nanos)))}function ea(t,e){return new Si(["projects",t.projectId,"databases",t.database]).child("documents").child(e).Ct()}function na(t){t=Si.xt(t);return Lr(ga(t)),t}function ra(t,e){return ea(t.O,e.path)}function ia(t,e){e=na(e);if(e.get(1)!==t.O.projectId)throw new qr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.O.projectId);if(e.get(3)!==t.O.database)throw new qr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.O.database);return new Li(ua(e))}function oa(t,e){return ea(t.O,e)}function sa(t){return new Si(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function ua(t){return Lr(4<t.length&&"documents"===t.get(4)),t.Pt(5)}function aa(t,e,n){return{name:ra(t,e),fields:n.proto.mapValue.fields}}function ca(t,e){var n,r,i;if(e instanceof $s)n={update:aa(t,e.key,e.value)};else if(e instanceof cu)n={delete:ra(t,e.key)};else if(e instanceof Zs)n={update:aa(t,e.key,e.data),updateMask:(i=e.Te,r=[],i.fields.forEach(function(t){return r.push(t.Ct())}),{fieldPaths:r})};else{if(!(e instanceof hu))return kr();n={verify:ra(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Ss)return{fieldPath:t.field.Ct(),setToServerValue:"REQUEST_TIME"};if(e instanceof Rs)return{fieldPath:t.field.Ct(),appendMissingElements:{values:e.elements}};if(e instanceof Cs)return{fieldPath:t.field.Ct(),removeAllFromArray:{values:e.elements}};if(e instanceof Ms)return{fieldPath:t.field.Ct(),increment:e._e};throw kr()})),e.Ee.we||(n.currentDocument=void 0!==(i=e.Ee).updateTime?{updateTime:(e=t,t=i.updateTime,$u(e,t.Tt()))}:void 0!==i.exists?{exists:i.exists}:kr()),n}function ha(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oa(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(ao(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(uo(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ao(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(uo(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:(e=t.op,Xu[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:da((t=t).field),direction:(t=t.dir,Ku[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.he||di(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=la(e.startAt)),e.endAt&&(n.structuredQuery.endAt=la(e.endAt)),n}function fa(t){var e=4===(o=na(t.parent)).length?Si.Nt():ua(o),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Lr(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[va(t)]:void 0!==t.fieldFilter?[(n=t,ko.create(ya(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return kr()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):kr():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new ns(ya((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=di(u="object"==typeof(u=n.limit)?u.value:u)?null:u);var s=null;n.startAt&&(s=pa(n.startAt));var u=null;return n.endAt&&(u=pa(n.endAt)),new os(e,i,t,o,r,"F",s,u)}function la(t){return{before:t.before,values:t.position}}function pa(t){var e=!!t.before,t=t.values||[];return new Xo(t,e)}function da(t){return{fieldPath:t.Ct()}}function ya(t){return ki.Mt(t.fieldPath)}function va(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ya(t.unaryFilter.field);return ko.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ya(t.unaryFilter.field);return ko.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=ya(t.unaryFilter.field);return ko.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=ya(t.unaryFilter.field);return ko.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return kr()}}function ga(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function ma(t){return new Ju(t,!0)}var wa=(ba.prototype.catch=function(t){return this.next(void 0,t)},ba.prototype.next=function(r,i){var o=this;return this.ss&&kr(),this.ss=!0,this.ns?this.error?this.rs(i,this.error):this.os(r,this.result):new ba(function(e,n){o.ts=function(t){o.os(r,t).next(e,n)},o.es=function(t){o.rs(i,t).next(e,n)}})},ba.prototype.cs=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},ba.prototype.us=function(t){try{var e=t();return e instanceof ba?e:ba.resolve(e)}catch(t){return ba.reject(t)}},ba.prototype.os=function(t,e){return t?this.us(function(){return t(e)}):ba.resolve(e)},ba.prototype.rs=function(t,e){return t?this.us(function(){return t(e)}):ba.reject(e)},ba.resolve=function(n){return new ba(function(t,e){t(n)})},ba.reject=function(n){return new ba(function(t,e){e(n)})},ba.hs=function(t){return new ba(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},ba.ls=function(t){for(var n=ba.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?ba.resolve(t):e()})}(r[e]);return n},ba.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.hs(i)},ba);function ba(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t(function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)},function(t){e.ns=!0,e.error=t,e.es&&e.es(t)})}function _a(t){return"IndexedDbTransactionError"===t.name}var Ea=(Ia.qs=function(t,e,n,r,i){i=new Ia(t,e,Date.now()+n,r,i);return i.start(n),i},Ia.prototype.start=function(t){var e=this;this.Us=setTimeout(function(){return e.Qs()},t)},Ia.prototype.Ks=function(){return this.Qs()},Ia.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new qr(jr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Ia.prototype.Qs=function(){var e=this;this.ks.Ws(function(){return null!==e.Us?(e.clearTimeout(),e.op().then(function(t){return e.Bs.resolve(t)})):Promise.resolve()})},Ia.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},Ia);function Ia(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new Ti,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch(function(t){})}function Ta(t,e){if(Or("AsyncQueue",e+": "+t),_a(t))return new qr(jr.UNAVAILABLE,e+": "+t);throw t}var Aa,Na,Oa,Sa=(ja.prototype.reset=function(){this.Js=0},ja.prototype.Zs=function(){this.Js=this.Hs},ja.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);0<i&&Nr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,function(){return e.Xs=Date.now(),t()}),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},ja.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},ja.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},ja.prototype.ei=function(){return(Math.random()-.5)*this.Js},ja),o=(Ma.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},Ma.prototype.li=function(){return 2===this.state},Ma.prototype.start=function(){3!==this.state?this.auth():this._i()},Ma.prototype.stop=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ma.prototype.fi=function(){this.state=0,this.ui.reset()},Ma.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,function(){return t.wi()}))},Ma.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},Ma.prototype.wi=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.li()?[2,this.close(0)]:[2]})})},Ma.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},Ma.prototype.close=function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==e?this.ui.reset():n&&n.code===jr.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):n&&n.code===jr.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Z(n)];case 1:return t.sent(),[2]}})})},Ma.prototype.Ii=function(){},Ma.prototype.auth=function(){var n=this;this.state=1;var t=this.mi(this.ci),e=this.ci;this.oi.getToken().then(function(t){n.ci===e&&n.Ai(t)},function(e){t(function(){var t=new qr(jr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Ri(t)})})},Ma.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y(function(){n(function(){return e.state=2,e.listener.Y()})}),this.stream.Z(function(t){n(function(){return e.Ri(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},Ma.prototype._i=function(){var t=this;this.state=4,this.ui.ti(function(){return y(t,void 0,void 0,function(){return v(this,function(t){return this.state=0,this.start(),[2]})})})},Ma.prototype.Ri=function(t){return Nr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},Ma.prototype.mi=function(e){var n=this;return function(t){n.js.Ws(function(){return n.ci===e?t():(Nr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Ma),Ra=(f(xa,Oa=o),xa.prototype.Pi=function(t){return this.ri.ft("Listen",t)},xa.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:kr(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.he?(Lr(void 0===s||"string"==typeof s),Vr.fromBase64String(s||"")):(Lr(void 0===s||s instanceof Uint8Array),Vr.fromUint8Array(s||new Uint8Array))),o=(u=e.targetChange.cause)&&(a=void 0===(c=u).code?jr.UNKNOWN:wi(c.code),new qr(a,c.message||"")),s=new xu(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=ia(t,n.document.name),i=ta(n.document.updateTime);var u=new ho({mapValue:{fields:n.document.fields}}),a=(o=new mo(r,i,u,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new Uu(a,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=ia(t,n.document),i=n.readTime?ta(n.readTime):Oi.min(),u=new wo(r,i),o=n.removedTargetIds||[],s=new Uu([],o,u.key,u);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=ia(t,n.document),i=n.removedTargetIds||[],s=new Uu([],i,r,null);else{if(!("filter"in e))return kr();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new su(n),i=e.targetId,s=new Vu(i,r)}return s}(this.fe,t),t=function(t){if(!("targetChange"in t))return Oi.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?ta(t.readTime):Oi.min()}(t);return this.listener.yi(e,t)},xa.prototype.gi=function(t){var e,n,r,i={};i.database=sa(this.fe),i.addTarget=(e=this.fe,(r=So(r=(n=t).target)?{documents:{documents:[oa(e,r.path)]}}:{query:ha(e,r)}).targetId=n.targetId,0<n.resumeToken.o()?r.resumeToken=Zu(e,n.resumeToken):0<n.oe.u(Oi.min())&&(r.readTime=$u(e,n.oe.Tt())),r);var o,t=(this.fe,o=t,null==(t=function(){switch(o.re){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kr()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.Ei(i)},xa.prototype.Vi=function(t){var e={};e.database=sa(this.fe),e.removeTarget=t,this.Ei(e)},xa),ka=(f(Va,Na=o),Object.defineProperty(Va.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),Va.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,Na.prototype.start.call(this)},Va.prototype.Ii=function(){this.pi&&this.vi([])},Va.prototype.Pi=function(t){return this.ri.ft("Write",t)},Va.prototype.onMessage=function(t){if(Lr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Lr(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?ta(t.updateTime):ta(e);n.isEqual(Oi.min())&&(n=ta(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new Gs(n,e)}(t,r)})):[]),n=ta(t.commitTime);return this.listener.Si(n,e)}var n,r;return Lr(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},Va.prototype.Ci=function(){var t={};t.database=sa(this.fe),this.Ei(t)},Va.prototype.vi=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return ca(e.fe,t)})};this.Ei(t)},Va),La=(f(Ua,Aa=function(){}),Ua.prototype.Ni=function(){if(this.xi)throw new qr(jr.FAILED_PRECONDITION,"The client has already been terminated.")},Ua.prototype.at=function(e,n,r){var i=this;return this.Ni(),this.credentials.getToken().then(function(t){return i.ri.at(e,n,r,t)}).catch(function(t){throw t.code===jr.UNAUTHENTICATED&&i.credentials.g(),t})},Ua.prototype._t=function(e,n,r){var i=this;return this.Ni(),this.credentials.getToken().then(function(t){return i.ri._t(e,n,r,t)}).catch(function(t){throw t.code===jr.UNAUTHENTICATED&&i.credentials.g(),t})},Ua.prototype.terminate=function(){this.xi=!1},Ua),Ie=(Ca.prototype.Oi=function(t){this.Fi.push(t)},Ca.prototype.ki=function(){this.Fi.forEach(function(t){return t()})},Ca),Da=(Pa.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Pa.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},Pa);function Pa(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}function Ca(){this.Fi=[]}function Ua(t,e,n){var r=this;return(r=Aa.call(this)||this).credentials=t,r.ri=e,r.fe=n,r.xi=!1,r}function Va(t,e,n,r,i){var o=this;return(o=Na.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).fe=r,o.pi=!1,o}function xa(t,e,n,r,i){var o=this;return(o=Oa.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).fe=r,o}function Ma(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new Sa(t,e)}function ja(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}function qa(e){return y(this,void 0,void 0,function(){return v(this,function(t){if(e.code!==jr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return Nr("LocalStore","Unexpectedly lost primary lease"),[2]})})}Da.Zi=-1;function Fa(t,e){this.progress=t,this.tr=e}var Ba=(Qa.prototype.nr=function(t,e,n){for(var r,i,o,s,u,a,c=n.sr,h=0;h<this.mutations.length;h++){var f=this.mutations[h];f.key.isEqual(t)&&(r=f,i=e,o=c[h],f=a=u=s=void 0,e=r instanceof $s?(u=o,f=(s=r).value,u.transformResults&&(a=ru(s.fieldTransforms,i,u.transformResults),f=ou(s.fieldTransforms,f,a)),new mo(s.key,u.version,f,{hasCommittedMutations:!0})):r instanceof Zs?function(t,e,n){if(!Ws(t.Ee,e))return new bo(t.key,n.version);e=nu(t,e,n.transformResults?ru(t.fieldTransforms,e,n.transformResults):[]);return new mo(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new wo(r.key,o.version,{hasCommittedMutations:!0}))}return e},Qa.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ys(i,e,e,this.er))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Ys(a,e,o,this.er))}return e},Qa.prototype.rr=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ir(t.key,n.get(t.key));e&&(i=i.Ie(t.key,e))}),i},Qa.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Su())},Qa.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ur(this.mutations,t.mutations,Qs)&&Ur(this.baseMutations,t.baseMutations,Qs)},Qa),Ga=(Ya.from=function(t,e,n){Lr(t.mutations.length===n.length);for(var r=Nu,i=t.mutations,o=0;o<i.length;o++)r=r.Ie(i[o].key,n[o].version);return new Ya(t,e,n,r)},Ya),za=(Wa.prototype.get=function(t){var e=this.ur(t),e=this.lr[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.hr(o,t))return i}},Wa.prototype.has=function(t){return void 0!==this.get(t)},Wa.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},Wa.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},Wa.prototype.forEach=function(s){Bi(this.lr,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},Wa.prototype.bt=function(){return Gi(this.lr)},Wa),o=(Ha.prototype.wr=function(t){t=this._r.get(t);return t?t.readTime:Oi.min()},Ha.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},Ha.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},Ha.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?wa.resolve(n.Ir):this.Rr(t,e)},Ha.prototype.getEntries=function(t,e){return this.Pr(t,e)},Ha.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},Ha.prototype.Tr=function(){},Ha);function Ha(){this._r=new za(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.dr=!1}function Wa(t,e){this.ur=t,this.hr=e,this.lr={}}function Ya(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}function Qa(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}function Ka(t,e,n){if(!n)throw new qr(jr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Xa(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qr(jr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ja(t,e,n,r){if(!0===e&&!0===r)throw new qr(jr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function $a(t){if(!Li.qt(t))throw new qr(jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Za(t){if(Li.qt(t))throw new qr(jr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function tc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":kr();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function ec(t,e){if("_delegate"in t&&(t=t._),t instanceof e)return t;if(e.name===t.constructor.name)throw new qr(jr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=tc(t);throw new qr(jr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function nc(t,e){if(e<=0)throw new qr(jr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}function rc(t){this.co=t}var ic=(ac.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},ac),oc=new Map,sc=(Object.defineProperty(uc.prototype,"app",{get:function(){if(!this.Jr)throw new qr(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(uc.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(uc.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),uc.prototype.eo=function(t){if(this.Gr)throw new qr(jr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new ic(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new Zr;switch(t.type){case"gapi":var e=t.client;return Lr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ni(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new qr(jr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},uc.prototype.no=function(){return this.jr},uc.prototype.so=function(){return this.Gr=!0,this.jr},uc.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},uc.prototype.io=function(){return(t=oc.get(this))&&(Nr("ComponentProvider","Removing Datastore"),oc.delete(this),t.terminate()),Promise.resolve();var t},uc);function uc(t,e){this.Wr="(lite)",this.jr=new ic({}),this.Gr=!1,t instanceof ii?(this.zr=t,this.Hr=new Zr):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qr(jr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ii(t.options.projectId)}(t),this.Hr=new ti(e))}function ac(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qr(jr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qr(jr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ja("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function cc(t){var e=fa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ds(e,e.limit,"L"):e}var hc=(Ic.prototype.fo=function(t,e){return this._o.add(e),wa.resolve()},Ic.prototype.wo=function(t,e){return wa.resolve(this._o.getEntries(e))},Ic),fc=(Ec.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new bu(Si.At),t=!r.has(n);return this.index[e]=r.add(n),t},Ec.prototype.has=function(t){var e=t.Vt(),t=t.yt(),e=this.index[e];return e&&e.has(t)},Ec.prototype.getEntries=function(t){return(this.index[t]||new bu(Si.At)).Dt()},Ec),lc=(_c.prototype.next=function(){return this.$o+=2,this.$o},_c.Bo=function(){return new _c(0)},_c.qo=function(){return new _c(-1)},_c),pc=(bc.prototype.Pa=function(e,n){var r=this;return this.Ra.So(e,n).next(function(t){return r.ya(e,n,t)})},bc.prototype.ya=function(t,r,i){return this.Kc.Ar(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ir(r,t);return t})},bc.prototype.ga=function(t,e,i){var o=Eu;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ir(t,e);o=o.Ie(t,e)}),o},bc.prototype.Va=function(e,t){var n=this;return this.Kc.getEntries(e,t).next(function(t){return n.pa(e,t)})},bc.prototype.pa=function(e,r){var i=this;return this.Ra.Do(e,r).next(function(t){var t=i.ga(e,r,t),n=Eu;return t.forEach(function(t,e){e=e||new wo(t,Oi.min()),n=n.Ie(t,e)}),n})},bc.prototype.Pc=function(t,e,n){return r=e,Li.qt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ba(t,e.path):fs(e)?this.va(t,e,n):this.Sa(t,e,n);var r},bc.prototype.ba=function(t,e){return this.Pa(t,new Li(e)).next(function(t){var e=Au;return t instanceof mo&&(e=e.Ie(t.key,t)),e})},bc.prototype.va=function(n,r,i){var o=this,s=r.collectionGroup,u=Au;return this.To.wo(n,s).next(function(t){return wa.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new os(t,null,e.ne.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Sa(n,e,i).next(function(t){t.forEach(function(t,e){u=u.Ie(t,e)})})}).next(function(){return u})})},bc.prototype.Sa=function(e,n,t){var c,h,r=this;return this.Kc.Pc(e,n,t).next(function(t){return c=t,r.Ra.xo(e,n)}).next(function(t){return h=t,r.Da(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],u=s.key,a=c.get(u),a=Ys(s,a,a,r.er);c=a instanceof mo?c.Ie(u,a):c.remove(u)}})}).next(function(){return c.forEach(function(t,e){ms(n,e)||(c=c.remove(t))}),c})},bc.prototype.Da=function(t,e,n){for(var r=Su(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Zs&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Kc.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof mo&&(c=c.Ie(t,e))}),c})},bc),dc=(wc.Na=function(t,e){for(var n=Su(),r=Su(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new wc(t,e.fromCache,n,r)},wc),yc=(mc.prototype.Fa=function(t){this.Oa=t},mc.prototype.Pc=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.ne.length||1===r.ne.length&&r.ne[0].field.Ot())||i.isEqual(Oi.min())?this.ka(e,r):this.Oa.Va(e,o).next(function(t){var n=s.Ma(r,t);return(us(r)||as(r))&&s.La(r.limitType,n,o,i)?s.ka(e,r):(Ar()<=u.DEBUG&&Nr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gs(r)),s.Oa.Pc(e,r,i).next(function(e){return n.forEach(function(t){e=e.Ie(t.key,t)}),e}))})},mc.prototype.Ma=function(n,t){var r=new bu(ws(n));return t.forEach(function(t,e){e instanceof mo&&ms(n,e)&&(r=r.add(e))}),r},mc.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.u(r))},mc.prototype.ka=function(t,e){return Ar()<=u.DEBUG&&Nr("QueryEngine","Using full collection scan to execute query:",gs(e)),this.Oa.Pc(t,e,Oi.min())},mc),vc=(gc.prototype.Fr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Ur(t,n.Ba)})},gc);function gc(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new fu(Cr),this.qa=new za(No,Oo),this.Ua=Oi.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new pc(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}function mc(){}function wc(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}function bc(t,e,n){this.Kc=t,this.Ra=e,this.To=n}function _c(t){this.$o=t}function Ec(){this.index={}}function Ic(){this._o=new fc}function Tc(i,o){return y(this,void 0,void 0,function(){var e,n,m,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Ra,m=e.Ka,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var g;return e.Ra.vo(v).next(function(t){return g=t,n=e.persistence.Ta(o),m=new pc(e.Qa,n,e.persistence.Ia()),n.vo(v)}).next(function(t){for(var e=[],n=[],r=Su(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var c=a[u],r=r.add(c.key)}for(var h=0,f=t;h<f.length;h++){var l=f[h];n.push(l.batchId);for(var p=0,d=l.mutations;p<d.length;p++){var y=d[p];r=r.add(y.key)}}return m.Va(v,r).next(function(t){return{Wa:t,ja:e,Ga:n}})})})];case 1:return r=t.sent(),[2,(e.Ra=n,e.Ka=m,e.$a.Fa(e.Ka),r)]}})})}function Ac(t,h){var f=t;return f.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,u,a=h.batch.keys(),c=f.Qa.lc({yc:!0});return e=f,r=t,o=c,s=(i=h).batch,n=s.keys(),u=wa.resolve(),n.forEach(function(n){u=u.next(function(){return o.Ar(r,n)}).next(function(t){var e=t,t=i.ar.get(n);Lr(null!==t),(!e||e.version.u(t)<0)&&(e=s.nr(n,e,i))&&o.Er(e,i.cr)})}),u.next(function(){return e.Ra.No(r,s)}).next(function(){return c.apply(t)}).next(function(){return f.Ra.ko(t)}).next(function(){return f.Ka.Va(t,a)})})}function Nc(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Qc.Wo(t)})}function Oc(t,r){var a=t,c=r.oe,h=a.Ba;return a.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=a.Qa.lc({yc:!0});h=a.Ba;var u=[];r.rn.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(u.push(a.Qc.ic(s,t.dn,e).next(function(){return a.Qc.nc(s,t._n,e)})),0<(i=t.resumeToken).o()&&(n=o.ae(i,c).ce(s.oo),h=h.Ie(e,n),r=o,i=t,Lr(0<(o=n).resumeToken.o()),(0===r.resumeToken.o()||3e8<=o.oe.Et()-r.oe.Et()||0<i._n.size+i.fn.size+i.dn.size)&&u.push(a.Qc.Yo(s,n))))});var e,n=Eu;return r.cn.forEach(function(t,e){r.an.has(t)&&u.push(a.persistence.Io.fc(s,t))}),u.push(Sc(s,t,r.cn,c,void 0).next(function(t){n=t})),c.isEqual(Oi.min())||(e=a.Qc.Wo(s).next(function(t){return a.Qc.Go(s,s.oo,c)}),u.push(e)),wa.hs(u).next(function(){return t.apply(s)}).next(function(){return a.Ka.pa(s,n)})}).then(function(t){return a.Ba=h,t})}function Sc(t,s,e,u,a){var n=Su();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=Eu;return e.forEach(function(t,e){var n=i.get(t),r=(null==a?void 0:a.get(t))||u;e instanceof wo&&e.version.isEqual(Oi.min())?(s.mr(t,r),o=o.Ie(t,e)):null==n||0<e.version.u(n.version)||0===e.version.u(n.version)&&n.hasPendingWrites?(s.Er(e,r),o=o.Ie(t,e)):Nr("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function Rc(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Qc.ec(e,r).next(function(t){return t?(n=t,wa.resolve(n)):i.Qc.Uo(e).next(function(t){return n=new bs(r,t,0,e.oo),i.Qc.zo(e,n).next(function(){return n})})})}).then(function(t){var e=i.Ba.get(t.targetId);return(null===e||0<t.oe.u(e.oe))&&(i.Ba=i.Ba.Ie(t.targetId,t),i.qa.set(r,t.targetId)),t})}function kc(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:n=(e=i).Ba.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Io.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!_a(r=t.sent()))throw r;return Nr("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Ba=e.Ba.remove(o),e.qa.delete(n.target),[2]}})})}function Lc(t,o,s){var u=t,a=Oi.min(),c=Su();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=ps(o),(void 0!==(t=(i=t).qa.get(r))?wa.resolve(i.Ba.get(t)):i.Qc.ec(n,r)).next(function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,u.Qc.oc(e,t.targetId).next(function(t){c=t})}).next(function(){return u.$a.Pc(e,o,s?a:Oi.min(),s?c:Su())}).next(function(t){return{documents:t,za:c}});var t,n,r,i})}var Dc,Pc,Cc=(rh.prototype.ao=function(t,e){return wa.resolve(this.Xa.get(e))},rh.prototype.uo=function(t,e){return this.Xa.set(e.id,{id:e.id,version:e.version,createTime:ta(e.createTime)}),wa.resolve()},rh.prototype.ho=function(t,e){return wa.resolve(this.Za.get(e))},rh.prototype.lo=function(t,e){return this.Za.set(e.name,{name:(e=e).name,query:cc(e.bundledQuery),readTime:ta(e.readTime)}),wa.resolve()},rh),Uc=(nh.prototype.bt=function(){return this.tu.bt()},nh.prototype.sc=function(t,e){e=new Vc(t,e);this.tu=this.tu.add(e),this.nu=this.nu.add(e)},nh.prototype.iu=function(t,e){var n=this;t.forEach(function(t){return n.sc(t,e)})},nh.prototype.rc=function(t,e){this.ru(new Vc(t,e))},nh.prototype.ou=function(t,e){var n=this;t.forEach(function(t){return n.rc(t,e)})},nh.prototype.cu=function(t){var e=this,n=new Li(new Si([])),r=new Vc(n,t),t=new Vc(n,t+1),i=[];return this.nu.Qe([r,t],function(t){e.ru(t),i.push(t.key)}),i},nh.prototype.au=function(){var e=this;this.tu.forEach(function(t){return e.ru(t)})},nh.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},nh.prototype.uu=function(t){var e=new Li(new Si([])),n=new Vc(e,t),t=new Vc(e,t+1),r=Su();return this.nu.Qe([n,t],function(t){r=r.add(t.key)}),r},nh.prototype.Mo=function(t){var e=new Vc(t,0),e=this.tu.We(e);return null!==e&&t.isEqual(e.key)},nh),Vc=(eh.eu=function(t,e){return Li.At(t.key,e.key)||Cr(t.hu,e.hu)},eh.su=function(t,e){return Cr(t.hu,e.hu)||Li.At(t.key,e.key)},eh),xc=(th.prototype.Ro=function(t){return wa.resolve(0===this.Ra.length)},th.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,0<this.Ra.length&&this.Ra[this.Ra.length-1];n=new Ba(i,e,n,r);this.Ra.push(n);for(var o=0,s=r;o<s.length;o++){var u=s[o];this._u=this._u.add(new Vc(u.key,i)),this.To.fo(t,u.key.path.yt())}return wa.resolve(n)},th.prototype.yo=function(t,e){return wa.resolve(this.fu(e))},th.prototype.po=function(t,e){e+=1,e=this.du(e),e=e<0?0:e;return wa.resolve(this.Ra.length>e?this.Ra[e]:null)},th.prototype.bo=function(){return wa.resolve(0===this.Ra.length?-1:this.lu-1)},th.prototype.vo=function(t){return wa.resolve(this.Ra.slice())},th.prototype.So=function(t,e){var n=this,r=new Vc(e,0),e=new Vc(e,Number.POSITIVE_INFINITY),i=[];return this._u.Qe([r,e],function(t){t=n.fu(t.hu);i.push(t)}),wa.resolve(i)},th.prototype.Do=function(t,e){var n=this,r=new bu(Cr);return e.forEach(function(t){var e=new Vc(t,0),t=new Vc(t,Number.POSITIVE_INFINITY);n._u.Qe([e,t],function(t){r=r.add(t.hu)})}),wa.resolve(this.wu(r))},th.prototype.xo=function(t,e){var n=e.path,r=n.length+1,e=n;Li.qt(e)||(e=e.child(""));var e=new Vc(new Li(e),0),i=new bu(Cr);return this._u.Ke(function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(i=i.add(t.hu)),!0)},e),wa.resolve(this.wu(i))},th.prototype.wu=function(t){var e=this,n=[];return t.forEach(function(t){t=e.fu(t);null!==t&&n.push(t)}),n},th.prototype.No=function(n,r){var i=this;Lr(0===this.Eu(r.batchId,"removed")),this.Ra.shift();var o=this._u;return wa.forEach(r.mutations,function(t){var e=new Vc(t.key,r.batchId);return o=o.delete(e),i.Io.Oo(n,t.key)}).next(function(){i._u=o})},th.prototype.Fo=function(t){},th.prototype.Mo=function(t,e){var n=new Vc(e,0),n=this._u.We(n);return wa.resolve(e.isEqual(n&&n.key))},th.prototype.ko=function(t){return this.Ra.length,wa.resolve()},th.prototype.Eu=function(t,e){return this.du(t)},th.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},th.prototype.fu=function(t){t=this.du(t);return t<0||t>=this.Ra.length?null:this.Ra[t]},th),Mc=(Zc.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:i,readTime:n}),this.size+=i-o,this.To.fo(t,r.path.yt())},Zc.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Zc.prototype.Ar=function(t,e){e=this.docs.get(e);return wa.resolve(e?e.Ir:null)},Zc.prototype.getEntries=function(t,e){var n=this,r=Eu;return e.forEach(function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)}),wa.resolve(r)},Zc.prototype.Pc=function(t,e,n){for(var r=Au,i=new Li(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=o.De(),u=s.key,a=s.value,s=a.Ir,a=a.readTime;if(!e.path.vt(u.path))break;a.u(n)<=0||s instanceof mo&&ms(e,s)&&(r=r.Ie(s.key,s))}return wa.resolve(r)},Zc.prototype.Iu=function(t,e){return wa.forEach(this.docs,function(t){return e(t)})},Zc.prototype.lc=function(t){return new jc(this)},Zc.prototype.dc=function(t){return wa.resolve(this.size)},Zc),jc=(f($c,Pc=o),$c.prototype.yr=function(n){var r=this,i=[];return this._r.forEach(function(t,e){e&&e.Ir?i.push(r.gc.Er(n,e.Ir,r.wr(t))):r.gc.mr(t)}),wa.hs(i)},$c.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},$c.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},$c),qc=(Jc.prototype.Un=function(t,n){return this.mu.forEach(function(t,e){return n(e)}),wa.resolve()},Jc.prototype.Wo=function(t){return wa.resolve(this.lastRemoteSnapshotVersion)},Jc.prototype.jo=function(t){return wa.resolve(this.Au)},Jc.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),wa.resolve(this.highestTargetId)},Jc.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),wa.resolve()},Jc.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new lc(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},Jc.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,wa.resolve()},Jc.prototype.Yo=function(t,e){return this.Ho(e),wa.resolve()},Jc.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),--this.targetCount,wa.resolve()},Jc.prototype.Br=function(n,r,i){var o=this,s=0,u=[];return this.mu.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.mu.delete(t),u.push(o.Zo(n,e.targetId)),s++)}),wa.hs(u).next(function(){return s})},Jc.prototype.tc=function(t){return wa.resolve(this.targetCount)},Jc.prototype.ec=function(t,e){e=this.mu.get(e)||null;return wa.resolve(e)},Jc.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),wa.resolve()},Jc.prototype.ic=function(e,t,n){this.Ru.ou(t,n);var r=this.persistence.Io,i=[];return r&&t.forEach(function(t){i.push(r.Oo(e,t))}),wa.hs(i)},Jc.prototype.Zo=function(t,e){return this.Ru.cu(e),wa.resolve()},Jc.prototype.oc=function(t,e){e=this.Ru.uu(e);return wa.resolve(e)},Jc.prototype.Mo=function(t,e){return wa.resolve(this.Ru.Mo(e))},Jc),Fc=(Xc.prototype.start=function(){return Promise.resolve()},Xc.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(Xc.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),Xc.prototype.Xc=function(){},Xc.prototype.Zc=function(){},Xc.prototype.Ia=function(){return this.To},Xc.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new xc(this.To,this.Io),this.yu[t.I()]=e),e},Xc.prototype.ac=function(){return this.Qc},Xc.prototype._c=function(){return this.Kc},Xc.prototype.ma=function(){return this.Wc},Xc.prototype.runTransaction=function(t,e,n){var r=this;Nr("MemoryPersistence","Starting transaction:",t);var i=new Bc(this.Fc.next());return this.Io.Vu(),n(i).next(function(t){return r.Io.pu(i).next(function(){return t})}).cs().then(function(t){return i.ki(),t})},Xc.prototype.bu=function(e,n){return wa.ls(Object.values(this.yu).map(function(t){return function(){return t.Mo(e,n)}}))},Xc),Bc=(f(Kc,Dc=Ie),Kc),Gc=(Qc.Du=function(t){return new Qc(t)},Object.defineProperty(Qc.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw kr()},enumerable:!1,configurable:!0}),Qc.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),wa.resolve()},Qc.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),wa.resolve()},Qc.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),wa.resolve()},Qc.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach(function(t){return n.Cu.add(t.toString())});var r=this.persistence.ac();return r.oc(t,e.targetId).next(function(t){t.forEach(function(t){return n.Cu.add(t.toString())})}).next(function(){return r.Xo(t,e)})},Qc.prototype.Vu=function(){this.Su=new Set},Qc.prototype.pu=function(n){var r=this,i=this.persistence._c().lc();return wa.forEach(this.Cu,function(t){var e=Li.Lt(t);return r.xu(n,e).next(function(t){t||i.mr(e)})}).next(function(){return r.Su=null,i.apply(n)})},Qc.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next(function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())})},Qc.prototype.gu=function(t){return 0},Qc.prototype.xu=function(t,e){var n=this;return wa.ls([function(){return wa.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},Qc),zc=(Yc.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Yc.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Yc.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},Yc),Hc=(Wc.prototype.sh=function(t){},Wc.prototype.rh=function(t,e,n){},Wc.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},Wc.prototype.fh=function(t,e,n){this.Nh[t]=e},Wc.prototype.hh=function(t){this.xh.ku(t)},Wc.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},Wc.prototype._h=function(t){delete this.Nh[t]},Wc.prototype.th=function(){return this.xh.activeTargetIds},Wc.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},Wc.prototype.start=function(){return this.xh=new zc,Promise.resolve()},Wc.prototype.wh=function(t,e,n){},Wc.prototype.Eh=function(t){},Wc.prototype.$=function(){},Wc.prototype.Xi=function(t){},Wc.prototype.Ih=function(){},Wc);function Wc(){this.xh=new zc,this.Nh={},this.$u=null,this.Hi=null}function Yc(){this.activeTargetIds=Ru}function Qc(t){this.persistence=t,this.vu=new Uc,this.Su=null}function Kc(t){var e=this;return(e=Dc.call(this)||this).oo=t,e}function Xc(t,e){var n=this;this.yu={},this.Fc=new Da(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new qc(this),this.To=new hc,this.Kc=(t=this.To,new Mc(t,function(t){return n.Io.gu(t)})),this.fe=new rc(e),this.Wc=new Cc(this.fe)}function Jc(t){this.persistence=t,this.mu=new za(No,Oo),this.lastRemoteSnapshotVersion=Oi.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Uc,this.targetCount=0,this.Pu=lc.Bo()}function $c(t){var e=this;return(e=Pc.call(this)||this).gc=t,e}function Zc(t,e){this.To=t,this.Tu=e,this.docs=new fu(Li.At),this.size=0}function th(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new bu(Vc.eu)}function eh(t,e){this.key=t,this.hu=e}function nh(){this.tu=new bu(Vc.eu),this.nu=new bu(Vc.su)}function rh(t){this.fe=t,this.Xa=new Map,this.Za=new Map}function ih(){return"undefined"!=typeof document?document:null}function oh(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L(function(t){n.Ws(function(){return y(o,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return vh(this)?(Nr("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Gh.add(4),[4,ch(e)];case 1:return t.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,ah(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Jh=new sh(n,r)}var sh=(uh.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()}))},uh.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,1<=this.Fh&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},uh.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},uh.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},uh.prototype.$h=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(Or(t),this.kh=!1):Nr("OnlineStateTracker",t)},uh.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},uh);function uh(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}function ah(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:if(!vh(r))return[3,4];e=0,n=r.zh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ch(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:e=0,n=r.zh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function hh(t,e){t.jh.has(e.targetId)||(t.jh.set(e.targetId,e),yh(t)?dh(t):Th(t).li()&&lh(t,e))}function fh(t,e){var n=t,t=Th(n);n.jh.delete(e),t.li()&&ph(n,e),0===n.jh.size&&(t.li()?t.di():vh(n)&&n.Jh.set("Unknown"))}function lh(t,e){t.Yh.Dn(e.targetId),Th(t).gi(e)}function ph(t,e){t.Yh.Dn(e),Th(t).Vi(e)}function dh(e){e.Yh=new ju({Xn:function(t){return e.Kh.Xn(t)},Zn:function(t){return e.jh.get(t)||null}}),Th(e).start(),e.Jh.Mh()}function yh(t){return vh(t)&&!Th(t).hi()&&0<t.jh.size}function vh(t){return 0===t.Gh.size}function gh(t){t.Yh=void 0}function mh(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:if(s.Jh.set("Online"),!(u instanceof xu&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.jh.has(i)?[4,o.Kh.Xh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.jh.delete(i),o.Yh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Nr("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,wh(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof Uu?s.Yh.Ln(u):u instanceof Vu?s.Yh.jn(u):s.Yh.qn(u),a.isEqual(Oi.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,Nc(s.Uh)];case 8:return o=t.sent(),0<=a.u(o)?[4,(i=a,(e=(r=s).Yh.Hn(i)).rn.forEach(function(t,e){var n;0<t.resumeToken.o()&&((n=r.jh.get(e))&&r.jh.set(e,n.ae(t.resumeToken,i)))}),e.on.forEach(function(t){var e=r.jh.get(t);e&&(r.jh.set(t,e.ae(Vr.h,e.oe)),ph(r,t),e=new bs(e.target,t,1,e.sequenceNumber),lh(r,e))}),r.Kh.Zh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Nr("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,wh(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function wh(n,r,i){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:if(!_a(r))throw r;return n.Gh.add(1),[4,ch(n)];case 1:return t.sent(),n.Jh.set("Offline"),i=i||function(){return Nc(n.Uh)},n.ks.ea(function(){return y(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return Nr("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Gh.delete(1),[4,ah(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function bh(e,n){return n().catch(function(t){return wh(e,t,n)})}function _h(a){return y(this,void 0,void 0,function(){var i,o,s,u;return v(this,function(t){switch(t.label){case 0:o=Ah(i=a),s=0<i.Wh.length?i.Wh[i.Wh.length-1].batchId:-1,t.label=1;case 1:if(!(vh(i)&&i.Wh.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Uh,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.Ra.po(t,n)}))];case 3:return null===(u=t.sent())?(0===i.Wh.length&&o.di(),[3,7]):(s=u.batchId,function(t,e){t.Wh.push(e);t=Ah(t);t.li()&&t.bi&&t.vi(e.mutations)}(i,u),[3,6]);case 4:return u=t.sent(),[4,wh(i,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return Eh(i)&&Ih(i),[2]}var e,n,r})})}function Eh(t){return vh(t)&&!Ah(t).hi()&&0<t.Wh.length}function Ih(t){Ah(t).start()}function Th(n){var t,e,r,i=this;return n.nl||(n.nl=(t=n.Qh,e=n.ks,r={Y:function(n){return y(this,void 0,void 0,function(){return v(this,function(t){return n.jh.forEach(function(t,e){lh(n,t)}),[2]})})}.bind(null,n),Z:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){return gh(e),yh(e)?(e.Jh.Bh(n),dh(e)):e.Jh.set("Unknown"),[2]})})}.bind(null,n),yi:mh.bind(null,n)},t.Ni(),new Ra(e,t.ri,t.credentials,t.fe,r)),n.zh.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.nl.fi(),yh(n)?dh(n):n.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.nl.stop()];case 2:t.sent(),gh(n),t.label=3;case 3:return[2]}})})})),n.nl}function Ah(n){var t,e,r,i=this;return n.sl||(n.sl=(t=n.Qh,e=n.ks,r={Y:function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return Ah(e).Ci(),[2]})})}.bind(null,n),Z:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return n&&Ah(e).bi?[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return mi(n=i.code)&&n!==jr.ABORTED?(e=r.Wh.shift(),Ah(r).fi(),[4,bh(r,function(){return r.Kh.el(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,_h(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return Eh(e)&&Ih(e),[2]}})})}.bind(null,n),Di:function(o){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){for(e=Ah(o),n=0,r=o.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]})})}.bind(null,n),Si:function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=r.Wh.shift(),n=Ga.from(e,i,o),[4,bh(r,function(){return r.Kh.tl(n)})];case 1:return t.sent(),[4,_h(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Ni(),new ka(e,t.ri,t.credentials,t.fe,r)),n.zh.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.sl.fi(),[4,_h(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.sl.stop()];case 3:t.sent(),0<n.Wh.length&&(Nr("RemoteStore","Stopping write stream with "+n.Wh.length+" pending writes"),n.Wh=[]),t.label=4;case 4:return[2]}})})})),n.sl}function Nh(){this.queries=new za(vs,ys),this.onlineState="Unknown",this.rl=new Set}var Oh=function(){this.il=void 0,this.listeners=[]};function Sh(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){switch(t.label){case 0:if(e=s,n=u.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new Oh),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.ol(n)];case 2:return o.il=t.sent(),[3,4];case 3:return o=t.sent(),o=Ta(o,"Initialization of query '"+gs(u.query)+"' failed"),[2,void u.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(u),u.cl(e.onlineState),i.il&&u.al(i.il)&&kh(e),[2]}})})}function Rh(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){return e=s,n=u.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(u))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.ul(n))]:[2]})})}function kh(t){t.rl.forEach(function(t){t.next()})}var Lh=(Mh.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Du(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},Mh.prototype.onError=function(t){this.hl.error(t)},Mh.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},Mh.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},Mh.prototype.fl=function(t){if(0<t.docChanges.length)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},Mh.prototype.wl=function(t){t=Du.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},Mh),Dh=(xh.prototype.Tl=function(){return"metadata"in this.payload},xh),Ph=(Vh.prototype.Ha=function(t){return ia(this.fe,t)},Vh.prototype.Ja=function(t){return t.metadata.exists?(e=this.fe,n=t.document,r=ia(e,n.name),e=ta(n.updateTime),n=new ho({mapValue:{fields:n.fields}}),new mo(r,e,n,{hasCommittedMutations:!1})):new wo(this.Ha(t.metadata.name),this.Ya(t.metadata.readTime));var e,n,r},Vh.prototype.Ya=ta,Vh),Ch=(Uh.prototype.ml=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},Uh.prototype.Al=function(t){for(var e=new Map,n=new Ph(this.fe),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Ha(o.metadata.name),u=0,a=o.metadata.queries;u<a.length;u++){var c=a[u],h=(e.get(c)||Su()).add(s);e.set(c,h)}}return e},Uh.prototype.complete=function(){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return[4,function(f,l,p,d){return y(this,void 0,void 0,function(){var n,r,i,o,e,s,u,a,c,h;return v(this,function(t){switch(t.label){case 0:for(n=f,r=Su(),i=Eu,o=Nu,e=0,s=p;e<s.length;e++)u=s[e],a=l.Ha(u.metadata.name),u.document&&(r=r.add(a)),i=i.Ie(a,l.Ja(u)),o=o.Ie(a,l.Ya(u.metadata.readTime));return c=n.Qa.lc({yc:!0}),[4,Rc(n,ps(ss(Si.xt("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Sc(e,c,i,Oi.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.Qc.Zo(e,h.targetId).next(function(){return n.Qc.nc(e,r,h.targetId)}).next(function(){return n.Ka.pa(e,t)})})})]}})})}(this.Uh,new Ph(this.fe),this.documents,this.Il.id)];case 1:e=t.sent(),n=this.Al(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=Su()),y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return[4,Rc(e,ps(cc(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=ta(i.readTime);if(0<=n.oe.u(e))return r.Wc.lo(t,i);e=n.ae(Vr.h,e);return r.Ba=r.Ba.Ie(e.targetId,e),r.Qc.Yo(t,e).next(function(){return r.Qc.Zo(t,n.targetId)}).next(function(){return r.Qc.nc(t,o,n.targetId)}).next(function(){return r.Wc.lo(t,i)})})]}})})}(this.Uh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Fa(Object.assign({},this.progress),e))]}})})},Uh);function Uh(t,e,n){this.Il=t,this.Uh=e,this.fe=n,this.queries=[],this.documents=[],this.progress=jh(t)}function Vh(t){this.fe=t}function xh(t,e){this.payload=t,this.byteLength=e}function Mh(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}function jh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var qh=function(t){this.key=t},Fh=function(t){this.key=t},Bh=(Object.defineProperty(Yh.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),Yh.prototype.bl=function(t,e){var s=this,u=e?e.vl:new Lu,a=(e||this).Vl,c=(e||this).tn,h=a,f=!1,l=us(this.query)&&a.size===this.query.limit?a.last():null,p=as(this.query)&&a.size===this.query.limit?a.first():null;if(t.Pe(function(t,e){var n=a.get(t),r=(r=e instanceof mo?e:null)&&(ms(s.query,r)?r:null),i=!!n&&s.tn.has(n.key),o=!!r&&(r.Jt||s.tn.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),e=!0):s.Sl(n,r)||(u.track({type:2,doc:r}),e=!0,(l&&0<s.gl(r,l)||p&&s.gl(r,p)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),e=!0):n&&!r&&(u.track({type:1,doc:n}),e=!0,(l||p)&&(f=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),us(this.query)||as(this.query))for(;h.size>this.query.limit;){var n=us(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);u.track({type:1,doc:n})}return{Vl:h,vl:u,La:f,tn:c}},Yh.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},Yh.prototype.yr=function(t,e,n){var o=this,r=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var i=t.vl.Xe();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.gl(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kr()}}var r,i}),this.Dl(n);var s=e?this.Cl():[],n=0===this.yl.size&&this.ln?1:0,e=n!==this.Pl;return this.Pl=n,0!==i.length||e?{snapshot:new Du(this.query,t.Vl,r,i,t.tn,0==n,e,!1),xl:s}:{xl:s}},Yh.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new Lu,tn:this.tn,La:!1},!1)):{xl:[]}},Yh.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},Yh.prototype.Dl=function(t){var e=this;t&&(t._n.forEach(function(t){return e.Rl=e.Rl.add(t)}),t.fn.forEach(function(t){}),t.dn.forEach(function(t){return e.Rl=e.Rl.delete(t)}),this.ln=t.ln)},Yh.prototype.Cl=function(){var e=this;if(!this.ln)return[];var n=this.yl;this.yl=Su(),this.Vl.forEach(function(t){e.Nl(t.key)&&(e.yl=e.yl.add(t.key))});var r=[];return n.forEach(function(t){e.yl.has(t)||r.push(new Fh(t))}),this.yl.forEach(function(t){n.has(t)||r.push(new qh(t))}),r},Yh.prototype.Fl=function(t){this.Rl=t.za,this.yl=Su();t=this.bl(t.documents);return this.yr(t,!0)},Yh.prototype.Ol=function(){return Du.sn(this.query,this.Vl,this.tn,0===this.Pl)},Yh),Gh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zh=function(t){this.key=t,this.kl=!1},Hh=(Object.defineProperty(Wh.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),Wh);function Wh(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new za(vs,ys),this.Ql=new Map,this.Kl=[],this.Wl=new fu(Li.At),this.jl=new Map,this.Gl=new Uc,this.zl={},this.Hl=new Map,this.Jl=lc.qo(),this.onlineState="Unknown",this.Yl=void 0}function Yh(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=Su(),this.tn=Su(),this.gl=ws(t),this.Vl=new ku(this.gl)}function Qh(u,a){return y(this,void 0,void 0,function(){var n,r,i,o,s;return v(this,function(t){switch(t.label){case 0:return(e=u).Ml.Kh.Zh=Xh.bind(null,e),e.Ml.Kh.Xn=function(t,e){var n=t,t=n.jl.get(e);if(t&&t.kl)return Su().add(t.key);var r=Su(),e=n.Ql.get(e);if(!e)return r;for(var i=0,o=e;i<o.length;i++){var s=o[i],s=n.Ul.get(s);r=r.je(s.view.pl)}return r}.bind(null,e),e.Ml.Kh.Xh=function(o,s,u){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return(e=o).$l.fh(s,"rejected",u),i=e.jl.get(s),(n=i&&i.key)?(r=(r=new fu(Li.At)).Ie(n,new wo(n,Oi.min())),i=Su().add(n),i=new Pu(Oi.min(),new Map,new bu(Cr),r,i),[4,Xh(e,i)]):[3,2];case 1:return t.sent(),e.Wl=e.Wl.remove(n),e.jl.delete(s),of(e),[3,4];case 2:return[4,kc(e.Uh,s,!1).then(function(){return ef(e,s,u)}).catch(qa)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,e),e.ql.yi=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,u=n.queries.get(u);if(u){for(var a=0,c=u.listeners;a<c.length;a++)c[a].al(s)&&(r=!0);u.il=s}}r&&kh(n)}.bind(null,e.Ll),e.ql.t_=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,e.Ll),(s=(n=e).Ul.get(a))?(r=s.targetId,n.$l.ah(r),i=s.view.Ol(),[3,4]):[3,1];case 1:return[4,Rc(n.Uh,ps(a))];case 2:return o=t.sent(),s=n.$l.ah(o.targetId),r=o.targetId,[4,function(i,o,s,u){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return i.Zl=function(t,e,n){return function(r,i,o,s){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=i.view.bl(o)).La?[4,Lc(r.Uh,i.query,!1).then(function(t){t=t.documents;return i.view.bl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.rn.get(i.targetId),n=i.view.yr(e,r.Xl,n),[2,(rf(r,i.targetId,n.xl),n.snapshot)]}})})}(i,t,e,n)},[4,Lc(i.Uh,o,!0)];case 1:return n=t.sent(),r=new Bh(o,n.za),e=r.bl(n.documents),n=Cu.hn(s,u&&"Offline"!==i.onlineState),n=r.yr(e,i.Xl,n),rf(i,s,n.xl),r=new Gh(o,s,r),[2,(i.Ul.set(o,r),i.Ql.has(s)?i.Ql.get(s).push(o):i.Ql.set(s,[o]),n.snapshot)]}})})}(n,a,r,"current"===s)];case 3:i=t.sent(),n.Xl&&hh(n.Ml,o),t.label=4;case 4:return[2,i]}var e})})}function Kh(l,p,d){return y(this,void 0,void 0,function(){var s,u;return v(this,function(t){switch(t.label){case 0:(o=l).Ml.Kh.tl=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,Ac(e.Uh,o)];case 2:return r=t.sent(),tf(e,n,null),Zh(e,n),e.$l.rh(n,"acknowledged"),[4,sf(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,qa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,o),o.Ml.Kh.el=function(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Uh,r=u,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Ra.yo(e,r).next(function(t){return Lr(null!==t),n=t.keys(),i.Ra.No(e,t)}).next(function(){return i.Ra.ko(e)}).next(function(){return i.Ka.Va(e,n)})}))];case 2:return o=t.sent(),tf(n,u,a),Zh(n,u),n.$l.rh(u,"rejected",a),[4,sf(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,qa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,o),u=o,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(r=u.Uh,a=p,h=r,f=Ni.now(),i=a.reduce(function(t,e){return t.add(e.key)},Su()),h.persistence.runTransaction("Locally write mutations","readwrite",function(u){return h.Ka.Va(u,i).next(function(t){c=t;for(var e,n=[],r=0,i=a;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),void 0!==e.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof mo?e.field(o.field):void 0,s=As(o.transform,s||null);null!=s&&(n=(null==n?new fo:n).set(o.field,s))}return n?n.Gt():null}(e.fieldTransforms,s):null);null!=s&&n.push(new Zs(o.key,s,function s(t){var u=[];return Bi(t.fields||{},function(t,e){var n=new ki([t]);if(co(e))if(0===(e=s(e.mapValue).fields).length)u.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];u.push(n.child(o))}else u.push(n)}),new zi(u)}(s.proto.mapValue),zs.exists(!0)))}return h.Ra.Po(u,f,n,a)})}).then(function(t){var e=t.rr(c);return{batchId:t.batchId,_r:e}}))];case 2:return s=t.sent(),u.$l.sh(s.batchId),e=u,n=s.batchId,o=d,r=(r=(r=e.zl[e.currentUser.I()])||new fu(Cr)).Ie(n,o),e.zl[e.currentUser.I()]=r,[4,sf(u,s._r)];case 3:return t.sent(),[4,_h(u.Ml)];case 4:return t.sent(),[3,6];case 5:return u=t.sent(),u=Ta(u,"Failed to persist write"),d.reject(u),[3,6];case 6:return[2]}var e,n,r,a,c,h,f,i,o})})}function Xh(r,i){return y(this,void 0,void 0,function(){var n,e;return v(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,Oc(n.Uh,i)];case 2:return e=t.sent(),i.rn.forEach(function(t,e){e=n.jl.get(e);e&&(Lr(t._n.size+t.fn.size+t.dn.size<=1),0<t._n.size?e.kl=!0:0<t.fn.size?Lr(e.kl):0<t.dn.size&&(Lr(e.kl),e.kl=!1))}),[4,sf(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,qa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function Jh(t,n,e){var r,t=t;(t.Xl&&0===e||!t.Xl&&1===e)&&(r=[],t.Ul.forEach(function(t,e){e=e.view.cl(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].cl(i)&&(o=!0)}),o&&kh(t)}(t.Ll,n),r.length&&t.ql.yi(r),t.onlineState=n,t.Xl&&t.$l.Eh(n))}function $h(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:vh((n=o).Ml)||Nr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Uh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ra.bo(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Hl.get(r)||[]).push(s),n.Hl.set(r,i),[3,4]);case 3:return i=t.sent(),i=Ta(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function Zh(t,e){(t.Hl.get(e)||[]).forEach(function(t){t.resolve()}),t.Hl.delete(e)}function tf(t,e,n){var r=t,i=r.zl[r.currentUser.I()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i)}function ef(e,t,n){void 0===n&&(n=null),e.$l.hh(t);for(var r=0,i=e.Ql.get(t);r<i.length;r++){var o=i[r];e.Ul.delete(o),n&&e.ql.t_(o,n)}e.Ql.delete(t),e.Xl&&e.Gl.cu(t).forEach(function(t){e.Gl.Mo(t)||nf(e,t)})}function nf(t,e){var n=t.Wl.get(e);null!==n&&(fh(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),of(t))}function rf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof qh?(t.Gl.sc(o.key,e),function(t,e){e=e.key;t.Wl.get(e)||(Nr("SyncEngine","New document in limbo: "+e),t.Kl.push(e),of(t))}(t,o)):o instanceof Fh?(Nr("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||nf(t,o.key)):kr()}}function of(t){for(;0<t.Kl.length&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new zh(e)),t.Wl=t.Wl.Ie(e,n),hh(t.Ml,new bs(ps(ss(e.path)),n,2,Da.Zi))}}function sf(e,s,u){return y(this,void 0,void 0,function(){var n,r,i,o;return v(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Ul.bt()?[3,3]:(n.Ul.forEach(function(t,e){o.push(n.Zl(e,s,u).then(function(t){t&&(n.Xl&&n.$l.fh(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=dc.Na(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.ql.yi(r),[4,function(a,c){return y(this,void 0,void 0,function(){var r,e,n,i,o,s,u;return v(this,function(t){switch(t.label){case 0:r=a,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return wa.forEach(c,function(e){return wa.forEach(e.Ca,function(t){return r.persistence.Io.sc(n,e.targetId,t)}).next(function(){return wa.forEach(e.xa,function(t){return r.persistence.Io.rc(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!_a(e=t.sent()))throw e;return Nr("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)u=i[n],o=u.targetId,u.fromCache||(s=r.Ba.get(o),u=s.oe,u=s.ue(u),r.Ba=r.Ba.Ie(o,u));return[2]}})})}(n.Uh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function uf(i,o){return y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Nr("SyncEngine","User change. New user:",o.I()),[4,Tc(n.Uh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Hl.forEach(function(t){t.forEach(function(t){t.reject(new qr(jr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Hl.clear(),n.$l.wh(o,r.ja,r.Ga),[4,sf(n,r.Wa)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function af(t,e,n){var r=t;(function(l,p,d){return y(this,void 0,void 0,function(){var u,a,c,h,f;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return u=t.sent(),[4,(r=l.Uh,o=r,s=ta((i=u).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Wc.ao(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.u(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.e_({taskState:"Success",documentsLoaded:u.totalDocuments,bytesLoaded:u.totalBytes,totalDocuments:u.totalDocuments,totalBytes:u.totalBytes}))];case 4:return d.n_(jh(u)),a=new Ch(u,l.Uh,p.fe),[4,p.s_()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,a.ml(c)]:[3,10];case 7:return(h=t.sent())&&d.n_(h),[4,p.s_()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,a.complete()];case 11:return f=t.sent(),[4,sf(l,f.tr,void 0)];case 12:return t.sent(),[4,(r=l.Uh,e=u,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Wc.uo(t,e)}))];case 13:return t.sent(),d.e_(f.progress),[3,15];case 14:return Sr("SyncEngine","Loading bundle failed with "+(f=t.sent())),d.i_(f),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.$l.Ih()})}var cf=(lf.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.fe=ma(e.rt.O),this.$l=this.r_(e),this.persistence=this.o_(e),[4,this.persistence.start()];case 1:return t.sent(),this.c_=this.a_(e),this.Uh=this.u_(e),[2]}})})},lf.prototype.a_=function(t){return null},lf.prototype.u_=function(t){return e=this.persistence,n=new yc,r=t.h_,t=this.fe,new vc(e,n,r,t);var e,n,r},lf.prototype.o_=function(t){return new Fc(Gc.Du,this.fe)},lf.prototype.r_=function(t){return new Hc},lf.prototype.terminate=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}})})},lf),hf=(ff.prototype.initialize=function(n,r){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return this.Uh?[3,2]:(this.Uh=n.Uh,this.$l=n.$l,this.Qh=this.__(r),this.Ml=this.f_(r),this.Ll=this.d_(r),this.Lu=this.w_(r,!n.synchronizeTabs),this.$l.$u=function(t){return Jh(e.Lu,t,1)},this.Ml.Kh.E_=uf.bind(null,this.Lu),[4,function(n,r){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,r?(e.Gh.delete(2),[4,ah(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Gh.add(2),[4,ch(e)]);case 3:t.sent(),e.Jh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}(this.Ml,this.Lu.Xl)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},ff.prototype.d_=function(t){return new Nh},ff.prototype.__=function(t){var e=ma(t.rt.O),n=(n=t.rt,new Ai(n));return t=t.credentials,new La(t,n,e)},ff.prototype.f_=function(t){var e=this,n=this.Uh,r=this.Qh,i=t.ks,o=function(t){return Jh(e.Lu,t,0)},t=new(si.G()?si:oi);return new oh(n,r,i,o,t)},ff.prototype.w_=function(t,e){return function(t,e,n,r,i,o,s){o=new Hh(t,e,n,r,i,o);return s&&(o.Yl=!0),o}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},ff.prototype.terminate=function(){return function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,Nr("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,ch(e)];case 1:return t.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}})})}(this.Ml)},ff);function ff(){}function lf(){this.synchronizeTabs=!1}function pf(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return y(this,void 0,void 0,function(){return v(this,function(t){return[2]})})},releaseLock:function(){}}}var df,yf=(Of.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},Of.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Of.prototype.I_=function(){this.muted=!0},Of.prototype.T_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Of),vf=(Nf.prototype.close=function(){return this.m_.cancel()},Nf.prototype.getMetadata=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return[2,this.metadata.promise]})})},Nf.prototype.s_=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.R_())]}})})},Nf.prototype.R_=function(){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return[4,this.P_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.A_.decode(e),n=Number(r),isNaN(n)&&this.y_("length string ("+r+") is not valid number"),[4,this.g_(n)]);case 2:return r=t.sent(),[2,new Dh(JSON.parse(r),e.length+n)]}})})},Nf.prototype.V_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},Nf.prototype.P_=function(){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return this.V_()<0?[4,this.p_()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.V_())<0&&this.y_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},Nf.prototype.g_=function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.p_()]:[3,3];case 1:t.sent()&&this.y_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.A_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},Nf.prototype.y_=function(t){throw this.m_.cancel(),new Error("Invalid bundle format: "+t)},Nf.prototype.p_=function(){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,this.m_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},Nf),gf=(Af.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},Af),mf=function(t){this._methodName=t},wf=(Object.defineProperty(Tf.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(Tf.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(Tf.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(Tf.prototype,"parent",{get:function(){return new _f(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),Tf.prototype.withConverter=function(t){return new Tf(this.firestore,t,this.S_)},Tf),bf=(If.prototype.withConverter=function(t){return new If(this.firestore,t,this.C_)},If),_f=(f(Ef,df=bf),Object.defineProperty(Ef.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(Ef.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(Ef.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new wf(this.firestore,null,new Li(t))},enumerable:!1,configurable:!0}),Ef.prototype.withConverter=function(t){return new Ef(this.firestore,t,this.D_)},Ef);function Ef(t,e,n){var r=this;return(r=df.call(this,t,e,ss(n))||this).firestore=t,r.D_=n,r.type="collection",r}function If(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function Tf(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function Af(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new qr(jr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new ki(t)}function Nf(t,e){var n=this;this.m_=t,this.fe=e,this.metadata=new Ti,this.buffer=new Uint8Array,this.A_=new TextDecoder("utf-8"),this.R_().then(function(t){t&&t.Tl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function Of(t){this.observer=t,this.muted=!1}function Sf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Br&&(t=t._),Ka("collection","path",e),t instanceof sc)return Za(n=Si.xt.apply(Si,l([e],r))),new _f(t,null,n);if(!(t instanceof wf||t instanceof _f))throw new qr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Za(n=Si.xt.apply(Si,l([t.path],r)).child(Si.xt(e))),new _f(t.firestore,null,n)}function Rf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Br&&(t=t._),1===arguments.length&&(e=Dr.t()),Ka("doc","path",e),t instanceof sc)return $a(n=Si.xt.apply(Si,l([e],r))),new wf(t,null,new Li(n));if(!(t instanceof wf||t instanceof _f))throw new qr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return $a(n=t.D_.child(Si.xt.apply(Si,l([e],r)))),new wf(t.firestore,t instanceof _f?t.v_:null,new Li(n))}function kf(t,e){return t instanceof Br&&(t=t._),e instanceof Br&&(e=e._),(t instanceof wf||t instanceof _f)&&(e instanceof wf||e instanceof _f)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Lf(t,e){return t instanceof Br&&(t=t._),e instanceof Br&&(e=e._),t instanceof bf&&e instanceof bf&&t.firestore===e.firestore&&ys(t.C_,e.C_)&&t.v_===e.v_}var Df=(Object.defineProperty(Mf.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(Mf.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),Mf.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},Mf.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},Mf.prototype.dt=function(t){return Cr(this.x_,t.x_)||Cr(this.N_,t.N_)},Mf),Pf=/^__.*__$/,Cf=(xf.prototype.F_=function(t,e){return null!==this.Te?new Zs(t,this.data,this.Te,e,this.fieldTransforms):new $s(t,this.data,e,this.fieldTransforms)},xf),Uf=(Vf.prototype.F_=function(t,e){return new Zs(t,this.data,this.Te,e,this.fieldTransforms)},Vf);function Vf(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}function xf(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}function Mf(t,e){if(!isFinite(t)||t<-90||90<t)throw new qr(jr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new qr(jr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function jf(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw kr()}}var qf=(Object.defineProperty(Gf.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(Gf.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),Gf.prototype.M_=function(t){return new Gf(Object.assign(Object.assign({},this.settings),t),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},Gf.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.M_({path:e,B_:!1});return e.q_(t),e},Gf.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.M_({path:t,B_:!1});return t.O_(),t},Gf.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},Gf.prototype.K_=function(t){return ml(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},Gf.prototype.contains=function(e){return void 0!==this.Te.find(function(t){return e.vt(t)})||void 0!==this.fieldTransforms.find(function(t){return e.vt(t.field)})},Gf.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},Gf.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(jf(this.k_)&&Pf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},Gf),Ff=(Bf.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new qf({k_:t,methodName:e,j_:n,path:ki.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},Bf);function Bf(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||ma(t)}function Gf(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}function zf(t){var e=t.so(),n=ma(t.zr);return new Ff(t.zr,!!e.ignoreUndefinedProperties,n)}function Hf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);dl("Data must be an object, but it was:",s,r);var u,a,r=ll(r,s);if(o.merge)u=new zi(s.Te),a=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var l=yl(e,f[h],n);if(!s.contains(l))throw new qr(jr.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");wl(c,l)||c.push(l)}u=new zi(c),a=s.fieldTransforms.filter(function(t){return u.Qt(t.field)})}else u=null,a=s.fieldTransforms;return new Cf(new ho(r),u,a)}var Wf,Yf=(f(Qf,Wf=mf),Qf.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},Qf.prototype.isEqual=function(t){return t instanceof Qf},Qf);function Qf(){return null!==Wf&&Wf.apply(this,arguments)||this}function Kf(t,e,n){return new qf({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var Xf,Jf,$f,Zf,tl=(f(ul,Zf=mf),ul.prototype.z_=function(t){return new Bs(t.path,new Ss)},ul.prototype.isEqual=function(t){return t instanceof ul},ul),el=(f(sl,$f=mf),sl.prototype.z_=function(t){var e=Kf(this,t,!0),n=this.H_.map(function(t){return fl(t,e)}),n=new Rs(n);return new Bs(t.path,n)},sl.prototype.isEqual=function(t){return this===t},sl),nl=(f(ol,Jf=mf),ol.prototype.z_=function(t){var e=Kf(this,t,!0),n=this.H_.map(function(t){return fl(t,e)}),n=new Cs(n);return new Bs(t.path,n)},ol.prototype.isEqual=function(t){return this===t},ol),rl=(f(il,Xf=mf),il.prototype.z_=function(t){var e=new Ms(t.fe,Ts(t.fe,this.J_));return new Bs(t.path,e)},il.prototype.isEqual=function(t){return this===t},il);function il(t,e){var n=this;return(n=Xf.call(this,t)||this).J_=e,n}function ol(t,e){var n=this;return(n=Jf.call(this,t)||this).H_=e,n}function sl(t,e){var n=this;return(n=$f.call(this,t)||this).H_=e,n}function ul(){return null!==Zf&&Zf.apply(this,arguments)||this}function al(t,r,i,e){var o=t.G_(1,r,i);dl("Data must be an object, but it was:",o,e);var s=[],u=new fo;Bi(e,function(t,e){var n=gl(r,t,i);e instanceof Br&&(e=e._);t=o.U_(n);e instanceof Yf?s.push(n):null!=(t=fl(e,t))&&(s.push(n),u.set(n,t))});e=new zi(s);return new Uf(u.Gt(),e,o.fieldTransforms)}function cl(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[yl(e,r,n)],a=[i];if(o.length%2!=0)throw new qr(jr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(yl(e,o[c])),a.push(o[c+1]);for(var h,f,l,p=[],d=new fo,y=u.length-1;0<=y;--y){wl(p,u[y])||(h=u[y],(f=a[y])instanceof Br&&(f=f._),l=s.U_(h),f instanceof Yf?p.push(h):null!=(l=fl(f,l))&&(p.push(h),d.set(h,l)))}i=new zi(p);return new Uf(d.Gt(),i,s.fieldTransforms)}function hl(t,e,n,r){return void 0===r&&(r=!1),fl(n,t.G_(r?4:3,e))}function fl(s,t){if(s instanceof Br&&(s=s._),pl(s))return dl("Unsupported field value:",t,s),ll(s,t);if(s instanceof mf)return function(t,e){if(!jf(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");t=t.z_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Te.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=fl(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof Br&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ts(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ni.fromDate(t);return{timestampValue:$u(e.fe,n)}}if(t instanceof Ni)return n=new Ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:$u(e.fe,n)};if(t instanceof Df)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fr)return{bytesValue:Zu(e.fe,t.l)};if(t instanceof wf){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ea(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+tc(t))}(s,t)}function ll(t,n){var r={};return Gi(t)?n.path&&0<n.path.length&&n.Te.push(n.path):Bi(t,function(t,e){e=fl(e,n.L_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function pl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ni||t instanceof Df||t instanceof Fr||t instanceof wf||t instanceof mf)}function dl(t,e,n){if(!pl(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=tc(n);throw"an object"===n?e.K_(t+" a custom object"):e.K_(t+" "+n)}var r}function yl(t,e,n){if(e instanceof Br&&(e=e._),e instanceof gf)return e.b_;if("string"==typeof e)return gl(t,e);throw ml("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var vl=new RegExp("[~\\*/\\[\\]]");function gl(e,n,r){if(0<=n.search(vl))throw ml("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(gf.bind.apply(gf,l([void 0],n.split("."))))).b_}catch(t){throw ml("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function ml(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new qr(jr.INVALID_ARGUMENT,(e+=". ")+t+n)}function wl(t,e){return t.some(function(t){return t.isEqual(e)})}var bl=(Al.prototype.ef=function(r){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new qr(jr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return y(this,void 0,void 0,function(){var n,e,r,i,o;return v(this,function(t){switch(t.label){case 0:return e=sa((n=s).fe)+"/documents",r={documents:u.map(function(t){return ra(n.fe,t)})},[4,n._t("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.fe,"found"in(t=t)?function(t,e){Lr(!!e.found),e.found.name,e.found.updateTime;var n=ia(t,e.found.name),t=ta(e.found.updateTime),e=new ho({mapValue:{fields:e.found.fields}});return new mo(n,t,e,{})}(e,t):"missing"in t?function(t,e){Lr(!!e.missing),Lr(!!e.readTime);t=ia(t,e.missing),e=ta(e.readTime);return new wo(t,e)}(e,t):kr());i.set(t.key.toString(),t)}),o=[],[2,(u.forEach(function(t){t=i.get(t.toString());Lr(!!t),o.push(t)}),o)]}})})}(this.Qh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof wo||t instanceof mo?n.sf(t):kr()}),e)]}})})},Al.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},Al.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},Al.prototype.delete=function(t){this.write(new cu(t,this.Ee(t))),this.tf.add(t.toString())},Al.prototype.commit=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Li.Lt(e);n.mutations.push(new hu(e,n.Ee(e)))}),[4,function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=sa((e=i).fe)+"/documents",r={writes:o.map(function(t){return ca(e.fe,t)})},[4,e.at("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Qh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},Al.prototype.sf=function(t){var e;if(t instanceof mo)e=t.version;else{if(!(t instanceof wo))throw kr();e=Oi.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qr(jr.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},Al.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?zs.updateTime(e):zs.de()},Al.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return zs.exists(!0);if(e.isEqual(Oi.min()))throw new qr(jr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zs.updateTime(e)},Al.prototype.write=function(t){this.nf(),this.mutations.push(t)},Al.prototype.nf=function(){},Al),_l=(Tl.prototype.run=function(){this.af()},Tl.prototype.af=function(){var t=this;this.ui.ti(function(){return y(t,void 0,void 0,function(){var e,n,r=this;return v(this,function(t){return e=new bl(this.Qh),(n=this.uf(e))&&n.then(function(t){r.ks.Ws(function(){return e.commit().then(function(){r.Bs.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},Tl.prototype.uf=function(t){try{var e=this.updateFunction(t);return!di(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},Tl.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this.ks.Ws(function(){return e.af(),Promise.resolve()})):this.Bs.reject(t)},Tl.prototype.lf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!mi(t)},Tl),El=(Il.prototype.getConfiguration=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}})})},Il.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then(function(){return e._f(e.user)})},Il.prototype.df=function(){if(this.ks.wf)throw new qr(jr.FAILED_PRECONDITION,"The client has already been terminated.")},Il.prototype.terminate=function(){var t=this;this.ks.Ef();var n=new Ti;return this.ks.Tf(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.p(),n.resolve(),[3,6];case 5:return e=t.sent(),e=Ta(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},Il);function Il(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Kr.UNAUTHENTICATED,this.clientId=Dr.t(),this._f=function(){},this.S=new Ti,this.credentials.V(function(t){Nr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()})}function Tl(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new Sa(this.ks,"transaction_retry")}function Al(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function Nl(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(Nr("FirestoreClient","Using default OfflineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return r.ks.Af(),Nr("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.ff(function(e){return r.ks.ea(function(){return y(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,Tc(i.Uh,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.Xc(function(){return r.terminate()}),r.mf=i,[2]}})})}(e,new cf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function Ol(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(Nr("FirestoreClient","Using default OnlineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return r.ks.Af(),[4,Nl(r)];case 1:return e=t.sent(),Nr("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r.ks.ea(function(){return function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=r).ks.Af(),Nr("RemoteStore","RemoteStore received new credentials"),n=vh(e),e.Gh.add(3),[4,ch(e)];case 1:return t.sent(),n&&e.Jh.set("Unknown"),[4,e.Kh.E_(i)];case 2:return t.sent(),e.Gh.delete(3),[4,ah(e)];case 3:return t.sent(),[2]}})})}(i.Ml,t)})}),r.If=i,[2]}})})}(e,new hf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function Sl(t){return Nl(t).then(function(t){return t.persistence})}function Rl(t){return Nl(t).then(function(t){return t.Uh})}function kl(t){return Ol(t).then(function(t){return t.Ml})}function Ll(t){return Ol(t).then(function(t){return t.Lu})}function Dl(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Ol(r)];case 1:return e=t.sent(),[2,((n=e.Ll).ol=Qh.bind(null,e.Lu),n.ul=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Ul.get(o),1<(r=e.Ql.get(n.targetId)).length?[2,(e.Ql.set(n.targetId,r.filter(function(t){return!ys(t,o)})),void e.Ul.delete(o))]:e.Xl?(e.$l.hh(n.targetId),e.$l.nh(n.targetId)?[3,2]:[4,kc(e.Uh,n.targetId,!1).then(function(){e.$l._h(n.targetId),fh(e.Ml,n.targetId),ef(e,n.targetId)}).catch(qa)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return ef(e,n.targetId),[4,kc(e.Uh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.Lu),n)]}})})}function Pl(n,r,i){var t=this;void 0===i&&(i={});var o=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new yf({next:function(t){r.Ws(function(){return Rh(n,u)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new qr(jr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new qr(jr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),u=new Lh(ss(i.path),t,{includeMetadataChanges:!0,El:!0});return Sh(n,u)},[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.ks,r,i,o])]}})})}),o.promise}function Cl(n,r,i){var t=this;void 0===i&&(i={});var o=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new yf({next:function(t){n.Ws(function(){return Rh(e,s)}),t.fromCache&&"server"===r.source?i.reject(new qr(jr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new Lh(t,o,{includeMetadataChanges:!0,El:!0});return Sh(e,s)},[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.ks,r,i,o])]}})})}),o.promise}var Ul,Vl=(Object.defineProperty(jl.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),jl.prototype.Ws=function(t){this.enqueue(t)},jl.prototype.Tf=function(t){this.Sf(),this.Df(t)},jl.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=ih())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},jl.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},jl.prototype.ea=function(t){var e=this;this.Ws(function(){return e.Pf.push(t),e.Cf()})},jl.prototype.Cf=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!_a(e=t.sent()))throw e;return Nr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.ui.ti(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},jl.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,Or("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},jl.prototype.ni=function(t,e,n){var r=this;this.Sf(),-1<this.bf.indexOf(t)&&(e=0);n=Ea.qs(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(n),n},jl.prototype.Sf=function(){this.Vf&&kr()},jl.prototype.Af=function(){},jl.prototype.Nf=function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},jl.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},jl.prototype.Of=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.Ls-e.Ls});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Ks(),"all"!==r&&n.Ms===r)break}return i.Nf()})},jl.prototype.kf=function(t){this.bf.push(t)},jl.prototype.xf=function(t){t=this.gf.indexOf(t);this.gf.splice(t,1)},jl),xl=(f(Ml,Ul=sc),Ml.prototype.io=function(){return this.Lf||Fl(this),this.Lf.terminate()},Ml);function Ml(t,e){var n=this;return(n=Ul.call(this,t,e)||this).Mf=new Vl,n.Wr="name"in t?t.name:"[DEFAULT]",n}function jl(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new Sa(this,"async_queue_retry"),this.vf=function(){var t=ih();t&&Nr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.ui.si()};var t=ih();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function ql(t){return t.Lf||Fl(t),t.Lf.df(),t.Lf}function Fl(t){var e,n,r=t.so(),r=(e=t.zr,n=t.Wr,new ri(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.Lf=new El(t.Hr,t.Mf,r)}var Bl,o=(Yl.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),$i(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qi(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ki(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw kr()}},Yl.prototype.jf=function(t,n){var r=this,i={};return Bi(t.fields||{},function(t,e){i[t]=r.$f(e,n)}),i},Yl.prototype.Kf=function(t){return new Df(Qi(t.latitude),Qi(t.longitude))},Yl.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.$f(t,e)})},Yl.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return Xi(e)?t(e):e}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Ji(t));default:return null}},Yl.prototype.Bf=function(t){t=Yi(t);return new Ni(t.seconds,t.nanos)},Yl.prototype.Gf=function(t,e){var n=Si.xt(t);Lr(ga(n));t=new ii(n.get(1),n.get(3)),n=new Li(n.Pt(5));return t.isEqual(e)||Or("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},Yl),Gl=(Object.defineProperty(Wl.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(Wl.prototype,"ref",{get:function(){return new wf(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),Wl.prototype.exists=function(){return null!==this.Jf},Wl.prototype.data=function(){if(this.Jf){if(this.v_){var t=new zl(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},Wl.prototype.get=function(t){if(this.Jf){t=this.Jf.data().field(Ql("DocumentSnapshot.get",t));if(null!==t)return this.Hf.$f(t)}},Wl),zl=(f(Hl,Bl=Gl),Hl.prototype.data=function(){return Bl.prototype.data.call(this)},Hl);function Hl(){return null!==Bl&&Bl.apply(this,arguments)||this}function Wl(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}function Yl(){}function Ql(t,e){return"string"==typeof e?gl(t,e):(e instanceof Br?e._:e).b_}function Kl(t){if(as(t)&&0===t.ne.length)throw new qr(jr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}Ie=function(){};function Xl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r].Yf(t)}return t}var Jl,$l,Zl,tp,ep,np=(f(fp,ep=Ie),fp.prototype.Yf=function(t){var e=zf(t.firestore),e=function(t,e,n,r,i,o){if(r.Ot()){if("array-contains"===i||"array-contains-any"===i)throw new qr(jr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){dp(o,i);for(var s=[],u=0,a=o;u<a.length;u++){var c=a[u];s.push(pp(n,t,c))}h={arrayValue:{values:s}}}else h=pp(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||dp(o,i),h=hl(e,"where",o,"in"===i||"not-in"===i);var h=ko.create(r,i,h);return function(t,e){if(e.ee()){var n=hs(t);if(null!==n&&!n.isEqual(e.field))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=cs(t);null!==n&&yp(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new qr(jr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new qr(jr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new bf(t.firestore,t.v_,(t=t.C_,e=t.filters.concat([e]),new os(t.path,t.collectionGroup,t.ne.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},fp),rp=(f(hp,tp=Ie),hp.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new qr(jr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qr(jr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ns(e,n);return e=r,null!==cs(n=t)||null!==(t=hs(n))&&yp(0,t,e.field),r}(t.C_,this.Xf,this.ed);return new bf(t.firestore,t.v_,(t=t.C_,e=t.ne.concat([e]),new os(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},hp),ip=(f(cp,Zl=Ie),cp.prototype.Yf=function(t){return new bf(t.firestore,t.v_,ds(t.C_,this.nd,this.sd))},cp),op=(f(ap,$l=Ie),ap.prototype.Yf=function(t){var e=lp(t,this.type,this.rd,this.od);return new bf(t.firestore,t.v_,(t=t.C_,e=e,new os(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},ap),sp=(f(up,Jl=Ie),up.prototype.Yf=function(t){var e=lp(t,this.type,this.rd,this.od);return new bf(t.firestore,t.v_,(t=t.C_,e=e,new os(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},up);function up(t,e,n){var r=this;return(r=Jl.call(this)||this).type=t,r.rd=e,r.od=n,r}function ap(t,e,n){var r=this;return(r=$l.call(this)||this).type=t,r.rd=e,r.od=n,r}function cp(t,e,n){var r=this;return(r=Zl.call(this)||this).type=t,r.nd=e,r.sd=n,r}function hp(t,e){var n=this;return(n=tp.call(this)||this).Xf=t,n.ed=e,n.type="orderBy",n}function fp(t,e,n){var r=this;return(r=ep.call(this)||this).Xf=t,r.Zf=e,r.td=n,r.type="where",r}function lp(t,c,e,n){if(e[0]instanceof Br&&(e[0]=e[0]._),e[0]instanceof Gl)return function(t,e,n,r){if(!n)throw new qr(jr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=ls(t);o<s.length;o++){var u=s[o];if(u.field.Ot())i.push(io(e,n.key));else{var a=n.field(u.field);if(Xi(a))throw new qr(jr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){u=u.field.Ct();throw new qr(jr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}i.push(a)}}return new Xo(i,r)}(t.C_,t.firestore.zr,e[0].Jf,n);var r=zf(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new qr(jr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.Ot()){if("string"!=typeof c)throw new qr(jr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!fs(t)&&-1!==c.indexOf("/"))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Si.xt(c));if(!Li.qt(h))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Li(h);u.push(io(e,h))}else{c=hl(n,r,c);u.push(c)}}return new Xo(u,o)}(t.C_,t.firestore.zr,r,c,e,n)}function pp(t,e,n){if(n instanceof Br&&(n=n._),"string"==typeof n){if(""===n)throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fs(e)&&-1!==n.indexOf("/"))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Si.xt(n));if(!Li.qt(e))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return io(t,new Li(e))}if(n instanceof wf)return io(t,n.S_);throw new qr(jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+tc(n)+".")}function dp(t,e){if(!Array.isArray(t)||0===t.length)throw new qr(jr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new qr(jr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yp(t,e,n){if(!n.isEqual(e))throw new qr(jr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function vp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var gp,mp=(f(wp,gp=o),wp.prototype.Uf=function(t){return new Fr(t)},wp.prototype.Qf=function(t){t=this.Gf(t,this.firestore.zr);return new wf(this.firestore,null,t)},wp);function wp(t){var e=this;return(e=gp.call(this)||this).firestore=t,e}function bp(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var _p,Ep,Ip=(kp.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},kp),Tp=(f(Rp,Ep=Gl),Rp.prototype.exists=function(){return Ep.prototype.exists.call(this)},Rp.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Ap(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},Rp.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){t=this.Jf.data().field(Ql("DocumentSnapshot.get",t));if(null!==t)return this.Hf.$f(t,e.serverTimestamps)}},Rp),Ap=(f(Sp,_p=Tp),Sp.prototype.data=function(t){return void 0===t&&(t={}),_p.prototype.data.call(this,t)},Sp),Np=(Object.defineProperty(Op.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Op.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Op.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Op.prototype.forEach=function(e,n){var r=this;this.ud.docs.forEach(function(t){e.call(n,new Ap(r.zf,r.Hf,t.key,t,new Ip(r.ud.tn.has(t.key),r.ud.fromCache),r.query.v_))})},Op.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this.ud.nn)throw new qr(jr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===t||(this.hd=function(i,e){if(i.ud.Ze.bt()){var n=0;return i.ud.docChanges.map(function(t){var e=new Ap(i.zf,i.Hf,t.doc.key,t.doc,new Ip(i.ud.tn.has(t.doc.key),i.ud.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.ud.Ze;return i.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Ap(i.zf,i.Hf,t.doc.key,t.doc,new Ip(i.ud.tn.has(t.doc.key),i.ud.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kr()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.ld=t),this.hd},Op);function Op(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Ip(r.hasPendingWrites,r.fromCache),this.query=n}function Sp(){return null!==_p&&_p.apply(this,arguments)||this}function Rp(t,e,n,r,i,o){var s=this;return(s=Ep.call(this,t,e,n,r,o)||this).zf=t,s.ad=t,s.metadata=i,s}function kp(t,e){this.hasPendingWrites=t,this.fromCache=e}function Lp(t,e){return t instanceof Tp&&e instanceof Tp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Np&&e instanceof Np&&t.zf===e.zf&&Lf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var Dp,Pp=(f(Cp,Dp=o),Cp.prototype.Uf=function(t){return new Fr(t)},Cp.prototype.Qf=function(t){t=this.Gf(t,this.firestore.zr);return new wf(this.firestore,null,t)},Cp);function Cp(t){var e=this;return(e=Dp.call(this)||this).firestore=t,e}function Up(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ec(t,wf);var o=ec(t.firestore,xl),s=zf(o);return e instanceof Br&&(e=e._),xp(o,[("string"==typeof e||e instanceof gf?cl(s,"updateDoc",t.S_,e,n,r):al(s,"updateDoc",t.S_,e)).F_(t.S_,zs.exists(!0))])}function Vp(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof Br&&(e=e._);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||bp(n[i])||(r=n[i],i++);var o,s,u,a,c,h,f={includeMetadataChanges:r.includeMetadataChanges};return bp(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof wf?(u=ec(e.firestore,xl),a=ss(e.S_.path),h={next:function(t){n[i]&&n[i](Mp(u,e,t))},error:n[i+1],complete:n[i+2]}):(s=ec(e,bf),u=ec(s.firestore,xl),a=s.C_,c=new Pp(u),h={next:function(t){n[i]&&n[i](new Np(u,c,s,t))},error:n[i+1],complete:n[i+2]},Kl(e.C_)),function(n,t,e){var r=this,i=new yf(h),o=new Lh(t,i,e);return n.ks.Ws(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Sh,[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.I_(),n.ks.Ws(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Rh,[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(ql(u),a,f)}function xp(t,e){return function(n,r){var t=this,i=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Kh,[4,Ll(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(ql(t),e)}function Mp(t,e,n){var r=n.docs.get(e.S_),i=new Pp(t);return new Tp(t,i,e.S_,r,new Ip(n.hasPendingWrites,n.fromCache),e.v_)}var jp=(qp.prototype.set=function(t,e,n){this.Ed();t=Fp(t,this.zf),e=vp(t.v_,e,n),n=Hf(this.wd,"WriteBatch.set",t.S_,e,null!==t.v_,n);return this.fd.push(n.F_(t.S_,zs.de())),this},qp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();t=Fp(t,this.zf);return e instanceof Br&&(e=e._),e="string"==typeof e||e instanceof gf?cl(this.wd,"WriteBatch.update",t.S_,e,n,r):al(this.wd,"WriteBatch.update",t.S_,e),this.fd.push(e.F_(t.S_,zs.exists(!0))),this},qp.prototype.delete=function(t){this.Ed();t=Fp(t,this.zf);return this.fd=this.fd.concat(new cu(t.S_,zs.de())),this},qp.prototype.commit=function(){return this.Ed(),this.dd=!0,0<this.fd.length?this._d(this.fd):Promise.resolve()},qp.prototype.Ed=function(){if(this.dd)throw new qr(jr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},qp);function qp(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=zf(t)}function Fp(t,e){if(t instanceof Br&&(t=t._),t.firestore!==e)throw new qr(jr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Bp,Gp,zp,Hp=(td.prototype.get=function(t){var e=this,n=Fp(t,this.zf),r=new mp(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return kr();t=t[0];if(t instanceof wo)return new Gl(e.zf,r,n.S_,null,n.v_);if(t instanceof mo)return new Gl(e.zf,r,t.key,t,n.v_);throw kr()})},td.prototype.set=function(t,e,n){t=Fp(t,this.zf),e=vp(t.v_,e,n),n=Hf(this.wd,"Transaction.set",t.S_,e,null!==t.v_,n);return this.Td.set(t.S_,n),this},td.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Fp(t,this.zf);return e instanceof Br&&(e=e._),e="string"==typeof e||e instanceof gf?cl(this.wd,"Transaction.update",t.S_,e,n,r):al(this.wd,"Transaction.update",t.S_,e),this.Td.update(t.S_,e),this},td.prototype.delete=function(t){t=Fp(t,this.zf);return this.Td.delete(t.S_),this},f(Zp,zp=td),Zp.prototype.get=function(t){var e=this,n=Fp(t,this.zf),r=new Pp(this.zf);return zp.prototype.get.call(this,t).then(function(t){return new Tp(e.zf,r,n.S_,t.Jf,new Ip(!1,!1),n.v_)})},Zp),Wp="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Yp=($p.prototype.enableIndexedDbPersistence=function(t,e){throw new qr(jr.FAILED_PRECONDITION,Wp)},$p.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new qr(jr.FAILED_PRECONDITION,Wp)},$p.prototype.clearIndexedDbPersistence=function(t){throw new qr(jr.FAILED_PRECONDITION,Wp)},$p),Qp=(f(Jp,Gp=Br),Object.defineProperty(Jp.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),Jp.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},Jp.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&Sr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},Jp.prototype.enableNetwork=function(){return function(r){var t=this;return r.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Sl(r)];case 1:return e=t.sent(),[4,kl(r)];case 2:return n=t.sent(),[2,(e.Zc(!0),(t=n).Gh.delete(0),ah(t))]}})})})}(ql(ec(this._,xl)))},Jp.prototype.disableNetwork=function(){return function(r){var t=this;return r.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Sl(r)];case 1:return e=t.sent(),[4,kl(r)];case 2:return n=t.sent(),[2,(e.Zc(!1),function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Gh.add(0),[4,ch(e)];case 1:return t.sent(),e.Jh.set("Offline"),[2]}})})}(n))]}})})})}(ql(ec(this._,xl)))},Jp.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ja("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},Jp.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},Jp.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},Jp.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=$h,[4,Ll(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(ql(ec(this._,xl)))},Jp.prototype.onSnapshotsInSync=function(t){return e=this._,t=t,function(n,t){var e=this,r=new yf(t);return n.ks.Ws(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.rl.add(e),e.next()},[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.I_(),n.ks.Ws(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.rl.delete(e)},[4,Dl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(ql(ec(e,xl)),bp(t)?t:{next:t});var e},Object.defineProperty(Jp.prototype,"app",{get:function(){if(!this.md)throw new qr(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),Jp.prototype.collection=function(t){try{return new Td(this,Sf(this._,t))}catch(t){throw hd(t,"collection()","Firestore.collection()")}},Jp.prototype.doc=function(t){try{return new sd(this,Rf(this._,t))}catch(t){throw hd(t,"doc()","Firestore.doc()")}},Jp.prototype.collectionGroup=function(t){try{return new _d(this,function(t,e){if(t=ec(t,sc),Ka("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new qr(jr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new bf(t,null,(e=e,new os(Si.Nt(),e)))}(this._,t))}catch(t){throw hd(t,"collectionGroup()","Firestore.collectionGroup()")}},Jp.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,Ol(n).then(function(t){return t.Qh})];case 1:return e=t.sent(),new _l(n.ks,e,r,i).run(),[2]}})})}),i.promise}(ql(n=this._),function(t){return t=new Hp(n,t),e(new id(r,t))})},Jp.prototype.batch=function(){var e=this;return ql(this._),new od(new jp(this._,function(t){return xp(e._,t)}))},Jp.prototype.loadBundle=function(t){throw new qr(jr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},Jp.prototype.namedQuery=function(t){throw new qr(jr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},Jp),Kp=(f(Xp,Bp=o),Xp.prototype.Uf=function(t){return new Qr(new Fr(t))},Xp.prototype.Qf=function(t){t=this.Gf(t,this.firestore.zr);return sd.Ad(t,this.firestore,null)},Xp);function Xp(t){var e=this;return(e=Bp.call(this)||this).firestore=t,e}function Jp(t,e,n){var r=this;return(r=Gp.call(this,e)||this).Id=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof ii||(r.md=t),r}function $p(){}function Zp(t,e){var n=this;return(n=zp.call(this,t,e)||this).zf=t,n}function td(t,e){this.zf=t,this.Td=e,this.wd=zf(t)}var ed,nd,rd,id=(f(cd,rd=Br),cd.prototype.get=function(t){var e=this,t=Ld(t);return this._.get(t).then(function(t){return new wd(e.zf,t)})},cd.prototype.set=function(t,e,n){t=Ld(t);return n?(Xa("Transaction.set",n),this._.set(t,e,n)):this._.set(t,e),this},cd.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Ld(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,l([o,e,n],r)),this},cd.prototype.delete=function(t){t=Ld(t);return this._.delete(t),this},cd),od=(f(ad,nd=Br),ad.prototype.set=function(t,e,n){t=Ld(t);return n?(Xa("WriteBatch.set",n),this._.set(t,e,n)):this._.set(t,e),this},ad.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Ld(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,l([o,e,n],r)),this},ad.prototype.delete=function(t){t=Ld(t);return this._.delete(t),this},ad.prototype.commit=function(){return this._.commit()},ad),sd=(f(ud,ed=Br),ud.Rd=function(t,e,n){if(t.length%2!=0)throw new qr(jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new ud(e,new wf(e._,n,new Li(t)))},ud.Ad=function(t,e,n){return new ud(e,new wf(e._,n,t))},Object.defineProperty(ud.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(ud.prototype,"parent",{get:function(){return new Td(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(ud.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),ud.prototype.collection=function(t){try{return new Td(this.firestore,Sf(this._,t))}catch(t){throw hd(t,"collection()","DocumentReference.collection()")}},ud.prototype.isEqual=function(t){return t instanceof Br&&(t=t._),t instanceof wf&&kf(this._,t)},ud.prototype.set=function(t,e){e=Xa("DocumentReference.set",e);try{return function(t,e,n){t=ec(t,wf);var r=ec(t.firestore,xl),e=vp(t.v_,e,n);return xp(r,[Hf(zf(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,zs.de())])}(this._,t,e)}catch(t){throw hd(t,"setDoc()","DocumentReference.set()")}},ud.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Up(this._,t):Up.apply(void 0,l([this._,t,e],n))}catch(t){throw hd(t,"updateDoc()","DocumentReference.update()")}},ud.prototype.delete=function(){return xp(ec((t=this._).firestore,xl),[new cu(t.S_,zs.de())]);var t},ud.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fd(t),i=ld(t,function(t){return new wd(e.firestore,new Tp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))});return Vp(this._,r,i)},ud.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=ec(e,wf);var n=ec(e.firestore,xl),t=ql(n),r=new Pp(n);return function(n,r){var t=this,i=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(o,s,u){return y(this,void 0,void 0,function(){var r,i;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Ka.Pa(t,e)}))];case 1:return(i=t.sent())instanceof mo?u.resolve(i):i instanceof wo?u.resolve(null):u.reject(new qr(jr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=Ta(r,"Failed to get document '"+s+" from cache"),u.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,Rl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new Tp(n,r,e.S_,t,new Ip(t instanceof mo&&t.Jt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=ec(e,wf);var n=ec(e.firestore,xl);return Pl(ql(n),e.S_,{source:"server"}).then(function(t){return Mp(n,e,t)})}:function(e){e=ec(e,wf);var n=ec(e.firestore,xl);return Pl(ql(n),e.S_).then(function(t){return Mp(n,e,t)})})(this._).then(function(t){return new wd(e.firestore,new Tp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},ud.prototype.withConverter=function(t){return new ud(this.firestore,this._.withConverter(t))},ud);function ud(t,e){var n=this;return(n=ed.call(this,e)||this).firestore=t,n.Hf=new Kp(t),n}function ad(){return null!==nd&&nd.apply(this,arguments)||this}function cd(t,e){var n=this;return(n=rd.call(this,e)||this).zf=t,n}function hd(t,e,n){return t.message=t.message.replace(e,n),t}function fd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!bp(r))return r}return{}}function ld(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=bp(t[0])?t[0]:bp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var pd,dd,yd,vd,gd,md,wd=(f(kd,md=Br),Object.defineProperty(kd.prototype,"ref",{get:function(){return new sd(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(kd.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(kd.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(kd.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),kd.prototype.data=function(t){return this._.data(t)},kd.prototype.get=function(t,e){return this._.get(t,e)},kd.prototype.isEqual=function(t){return Lp(this._,t._)},kd),bd=(f(Rd,gd=wd),Rd.prototype.data=function(t){return this._.data(t)},Rd),_d=(f(Sd,vd=Br),Sd.prototype.where=function(t,e,n){try{return new Sd(this.firestore,Xl(this._,(r=n,i=e,o=Ql("where",t),new np(o,i,r))))}catch(t){throw hd(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},Sd.prototype.orderBy=function(n,t){try{return new Sd(this.firestore,Xl(this._,function(t){void 0===t&&(t="asc");var e=t,t=Ql("orderBy",n);return new rp(t,e)}(t)))}catch(n){throw hd(n,/(orderBy|where)\(\)/,"Query.$1()")}},Sd.prototype.limit=function(t){try{return new Sd(this.firestore,Xl(this._,(nc("limit",e=t),new ip("limit",e,"F"))))}catch(t){throw hd(t,"limit()","Query.limit()")}var e},Sd.prototype.limitToLast=function(t){try{return new Sd(this.firestore,Xl(this._,(nc("limitToLast",e=t),new ip("limitToLast",e,"L"))))}catch(t){throw hd(t,"limitToLast()","Query.limitToLast()")}var e},Sd.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Sd(this.firestore,Xl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"startAt()","Query.startAt()")}},Sd.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Sd(this.firestore,Xl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"startAfter()","Query.startAfter()")}},Sd.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Sd(this.firestore,Xl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"endBefore()","Query.endBefore()")}},Sd.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Sd(this.firestore,Xl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"endAt()","Query.endAt()")}},Sd.prototype.isEqual=function(t){return Lf(this._,t._)},Sd.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=ec(e,bf);var n=ec(e.firestore,xl),t=ql(n),r=new Pp(n);return function(n,r){var t=this,i=new Ti;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Lc(i,o,!0)];case 1:return r=t.sent(),e=new Bh(o,r.za),n=e.bl(r.documents),n=e.yr(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=Ta(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,Rl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new Np(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=ec(e,bf);var n=ec(e.firestore,xl),t=ql(n),r=new Pp(n);return Cl(t,e.C_,{source:"server"}).then(function(t){return new Np(n,r,e,t)})}:function(e){e=ec(e,bf);var n=ec(e.firestore,xl),t=ql(n),r=new Pp(n);return Kl(e.C_),Cl(t,e.C_).then(function(t){return new Np(n,r,e,t)})})(this._).then(function(t){return new Id(e.firestore,new Np(e.firestore._,e.Hf,e._,t.ud))})},Sd.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fd(t),i=ld(t,function(t){return new Id(e.firestore,new Np(e.firestore._,e.Hf,e._,t.ud))});return Vp(this._,r,i)},Sd.prototype.withConverter=function(t){return new Sd(this.firestore,this._.withConverter(t))},Sd),Ed=(f(Od,yd=Br),Object.defineProperty(Od.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(Od.prototype,"doc",{get:function(){return new bd(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(Od.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(Od.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),Od),Id=(f(Nd,dd=Br),Object.defineProperty(Nd.prototype,"query",{get:function(){return new _d(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"docs",{get:function(){var e=this;return this._.docs.map(function(t){return new bd(e.zf,t)})},enumerable:!1,configurable:!0}),Nd.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new Ed(e.zf,t)})},Nd.prototype.forEach=function(e,n){var r=this;this._.forEach(function(t){e.call(n,new bd(r.zf,t))})},Nd.prototype.isEqual=function(t){return Lp(this._,t._)},Nd),Td=(f(Ad,pd=_d),Object.defineProperty(Ad.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(Ad.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(Ad.prototype,"parent",{get:function(){var t=this._.parent;return t?new sd(this.firestore,t):null},enumerable:!1,configurable:!0}),Ad.prototype.doc=function(t){try{return new sd(this.firestore,void 0===t?Rf(this._):Rf(this._,t))}catch(t){throw hd(t,"doc()","CollectionReference.doc()")}},Ad.prototype.add=function(t){var e,n,r,i=this;return e=this._,n=t,t=ec(e.firestore,xl),r=Rf(e),n=vp(e.v_,n),xp(t,[Hf(zf(e.firestore),"addDoc",r.S_,n,null!==e.v_,{}).F_(r.S_,zs.exists(!1))]).then(function(){return r}).then(function(t){return new sd(i.firestore,t)})},Ad.prototype.isEqual=function(t){return kf(this._,t._)},Ad.prototype.withConverter=function(t){return new Ad(this.firestore,this._.withConverter(t))},Ad);function Ad(t,e){var n=this;return(n=pd.call(this,t,e)||this).firestore=t,n._=e,n}function Nd(t,e){var n=this;return(n=dd.call(this,e)||this).zf=t,n}function Od(t,e){var n=this;return(n=yd.call(this,e)||this).zf=t,n}function Sd(t,e){var n=this;return(n=vd.call(this,e)||this).firestore=t,n.Hf=new Kp(t),n}function Rd(){return null!==gd&&gd.apply(this,arguments)||this}function kd(t,e){var n=this;return(n=md.call(this,e)||this).zf=t,n}function Ld(t){return t instanceof Br&&(t=t._),ec(t,wf)}var Dd,Pd,Ie=(f(xd,Pd=Br),xd.documentId=function(){return new xd(ki.kt().Ct())},xd.prototype.isEqual=function(t){return t instanceof Br&&(t=t._),t instanceof gf&&this._.b_.isEqual(t.b_)},xd),o=(f(Vd,Dd=Br),Vd.serverTimestamp=function(){var t=new tl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Vd(t)},Vd.delete=function(){var t=new Yf("deleteField");return t._methodName="FieldValue.delete",new Vd(t)},Vd.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new el("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new Vd(n)},Vd.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nl("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new Vd(n)},Vd.increment=function(t){t=new rl("increment",t);return t._methodName="FieldValue.increment",new Vd(t)},Vd.prototype.isEqual=function(t){return this._.isEqual(t._)},Vd),Cd=(Ud.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},Ud.prototype.catch=function(t){return this.yd.promise.catch(t)},Ud.prototype.then=function(t,e){return this.yd.promise.then(t,e)},Ud.prototype.e_=function(t){this.n_(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},Ud.prototype.i_=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},Ud.prototype.n_=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},Ud);function Ud(){this.Pd={},this.yd=new Ti,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function Vd(){return null!==Dd&&Dd.apply(this,arguments)||this}function xd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Pd.call(this,new(gf.bind.apply(gf,l([void 0],t))))||this}function Md(t,s){var e=new Cd;return function(n,t,r){var e,i=this,o=(e=s,t=ma(t),e=function(t){if(t instanceof Uint8Array)return pf(t,void 0);if(t instanceof ArrayBuffer)return pf(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new vf(e,t));n.ks.Ws(function(){return y(i,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=af,[4,Ll(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(ql(t._),t.zr,e),e}var jd=(qd.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},qd.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},qd.prototype.setServiceProps=function(t){return this.serviceProps=t,this},qd);function qd(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Fd,Bd,Gd={Firestore:Qp,GeoPoint:Df,Timestamp:Ni,Blob:Qr,Transaction:id,WriteBatch:od,DocumentReference:sd,DocumentSnapshot:wd,Query:_d,QueryDocumentSnapshot:bd,QuerySnapshot:Id,CollectionReference:Td,FieldPath:Ie,FieldValue:o,setLogLevel:function(t){Tr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(Fd=e.default).INTERNAL.registerComponent(new jd("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new Qp(e,new xl(e,t),new Yp)},"PUBLIC").setServiceProps(Object.assign({},Gd))),Fd.registerVersion("@firebase/firestore","2.1.0"),(Bd=Qp).prototype.loadBundle=function(t){return Md(this,t)},Bd.prototype.namedQuery=function(t){return t=t,function(n,r){var t=this;return n.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Wc.ho(t,e)})},[4,Rl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(ql((e=this)._),t).then(function(t){return t?new _d(e,new bf(e._,null,t.query)):null});var e}}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-firestore.memory.js.map
