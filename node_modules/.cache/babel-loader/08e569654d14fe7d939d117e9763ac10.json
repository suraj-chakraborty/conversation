{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\react\\\\chat_app\\\\react-chatengine-demo\\\\src\\\\components\\\\RailHeader\\\\RailHeader.jsx\",\n    _s = $RefreshSig$();\n\nimport { fb } from 'service';\nimport { useChat } from 'context';\nimport { useResolved } from 'hooks';\nimport { useRef, useState } from 'react';\nimport { ImageUpload } from 'components';\nimport { Icon, IconGroup, Image, Loader } from 'semantic-ui-react';\nexport const RailHeader = () => {\n  _s();\n\n  const {\n    chatConfig\n  } = useChat();\n  const configResolved = useResolved(chatConfig);\n  const inputRef = useRef(null);\n  const [image, setImage] = useState();\n\n  const onFileAttach = file => {\n    setImage(file);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      ref: inputRef,\n      className: \"file-input\",\n      accept: \"image/jpeg,image/png\",\n      onChange: e => {\n        var _e$target, _e$target$files;\n\n        const file = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : (_e$target$files = _e$target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n\n        if (file) {\n          onFileAttach(file);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this), !!image && /*#__PURE__*/_jsxDEV(ImageUpload, {\n      crop: true,\n      file: image,\n      header: \"Set Your Avatar\",\n      mode: \"message\",\n      onSubmit: croppedImage => {\n        const storageRef = fb.storage.ref();\n        const uploadRef = storageRef.child(`${chatConfig.userSecret}_avatar.jpg`);\n        uploadRef.put(croppedImage).then(() => {\n          uploadRef.getDownloadURL().then(url => {\n            fb.firestore.collection('chatUsers').doc(chatConfig.userSecret).update({\n              avatar: url\n            }).then(() => {\n              setImage(null);\n            });\n          });\n        });\n      },\n      close: () => setImage(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-rail-header\",\n      children: [/*#__PURE__*/_jsxDEV(Icon, {\n        onClick: () => fb.auth.signOut(),\n        className: \"sign-out\",\n        name: \"sign out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), configResolved && !!chatConfig ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"current-user-info\",\n        children: [/*#__PURE__*/_jsxDEV(IconGroup, {\n          onClick: () => {\n            const input = inputRef.current;\n\n            if (input) {\n              input.value = '';\n              input.click();\n            }\n          },\n          className: \"user-avatar\",\n          size: \"large\",\n          children: [chatConfig.avatar ? /*#__PURE__*/_jsxDEV(Image, {\n            src: chatConfig.avatar,\n            avatar: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-avatar\",\n            children: chatConfig.userName[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Icon, {\n            corner: true,\n            name: \"camera\",\n            inverted: true,\n            circular: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current-username\",\n          children: [\"@\", chatConfig.userName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-loading\",\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          active: true,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(RailHeader, \"VwaLpIjOQw6EcAJnqyM8D5qNVng=\", false, function () {\n  return [useChat, useResolved];\n});\n\n_c = RailHeader;\n\nvar _c;\n\n$RefreshReg$(_c, \"RailHeader\");","map":{"version":3,"sources":["F:/react/chat_app/react-chatengine-demo/src/components/RailHeader/RailHeader.jsx"],"names":["fb","useChat","useResolved","useRef","useState","ImageUpload","Icon","IconGroup","Image","Loader","RailHeader","chatConfig","configResolved","inputRef","image","setImage","onFileAttach","file","e","target","files","croppedImage","storageRef","storage","ref","uploadRef","child","userSecret","put","then","getDownloadURL","url","firestore","collection","doc","update","avatar","auth","signOut","input","current","value","click","userName","toUpperCase"],"mappings":"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","sourcesContent":["import { fb } from 'service';\nimport { useChat } from 'context';\nimport { useResolved } from 'hooks';\nimport { useRef, useState } from 'react';\nimport { ImageUpload } from 'components';\nimport { Icon, IconGroup, Image, Loader } from 'semantic-ui-react';\n\nexport const RailHeader = () => {\n  const { chatConfig } = useChat();\n  const configResolved = useResolved(chatConfig);\n  const inputRef = useRef(null);\n  const [image, setImage] = useState();\n\n  const onFileAttach = file => {\n    setImage(file);\n  };\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        ref={inputRef}\n        className=\"file-input\"\n        accept=\"image/jpeg,image/png\"\n        onChange={e => {\n          const file = e.target?.files?.[0];\n          if (file) {\n            onFileAttach(file);\n          }\n        }}\n      />\n\n      {!!image && (\n        <ImageUpload\n          crop\n          file={image}\n          header=\"Set Your Avatar\"\n          mode=\"message\"\n          onSubmit={croppedImage => {\n            const storageRef = fb.storage.ref();\n            const uploadRef = storageRef.child(\n              `${chatConfig.userSecret}_avatar.jpg`,\n            );\n            uploadRef.put(croppedImage).then(() => {\n              uploadRef.getDownloadURL().then(url => {\n                fb.firestore\n                  .collection('chatUsers')\n                  .doc(chatConfig.userSecret)\n                  .update({ avatar: url })\n                  .then(() => {\n                    setImage(null);\n                  });\n              });\n            });\n          }}\n          close={() => setImage(null)}\n        />\n      )}\n\n      <div className=\"left-rail-header\">\n        <Icon\n          onClick={() => fb.auth.signOut()}\n          className=\"sign-out\"\n          name=\"sign out\"\n        />\n        {configResolved && !!chatConfig ? (\n          <div className=\"current-user-info\">\n            <IconGroup\n              onClick={() => {\n                const input = inputRef.current;\n                if (input) {\n                  input.value = '';\n                  input.click();\n                }\n              }}\n              className=\"user-avatar\"\n              size=\"large\"\n            >\n              {chatConfig.avatar ? (\n                <Image src={chatConfig.avatar} avatar />\n              ) : (\n                <div className=\"empty-avatar\">\n                  {chatConfig.userName[0].toUpperCase()}\n                </div>\n              )}\n\n              <Icon corner name=\"camera\" inverted circular />\n            </IconGroup>\n\n            <div className=\"current-username\">@{chatConfig.userName}</div>\n          </div>\n        ) : (\n          <div className=\"user-loading\">\n            <Loader active size=\"small\" />\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}