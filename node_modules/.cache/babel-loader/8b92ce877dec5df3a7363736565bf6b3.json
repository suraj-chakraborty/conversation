{"ast":null,"code":"import _slicedToArray from\"F:/react/conversation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{fb}from'service';import{useChat}from'context';import React,{useEffect,useState}from'react';import{Image}from'semantic-ui-react';export var ChatAvatar=function ChatAvatar(_ref){var chat=_ref.chat,username=_ref.username,className=_ref.className;var _useChat=useChat(),chatConfig=_useChat.chatConfig;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];useEffect(function(){fb.firestore.collection('chatUsers').where('userName','==',username).get().then(function(snap){var _snap$docs$;var data=(_snap$docs$=snap.docs[0])===null||_snap$docs$===void 0?void 0:_snap$docs$.data();if(data===null||data===void 0?void 0:data.avatar){setAvatar(data.avatar);}});},[chat,chatConfig,username]);return avatar?/*#__PURE__*/_jsx(Image,{className:className||'chat-list-avatar',src:avatar}):/*#__PURE__*/_jsx(\"div\",{className:className||'empty-avatar',children:chat.people.find(function(p){return p.person.username!==chatConfig.userName;}).person.username[0].toUpperCase()});};","map":{"version":3,"sources":["F:/react/conversation/src/components/ChatAvatar/ChatAvatar.jsx"],"names":["fb","useChat","React","useEffect","useState","Image","ChatAvatar","chat","username","className","chatConfig","avatar","setAvatar","firestore","collection","where","get","then","snap","data","docs","people","find","p","person","userName","toUpperCase"],"mappings":"uLAAA,OAASA,EAAT,KAAmB,SAAnB,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,KAAsB,mBAAtB,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAmC,IAAhCC,CAAAA,IAAgC,MAAhCA,IAAgC,CAA1BC,QAA0B,MAA1BA,QAA0B,CAAhBC,SAAgB,MAAhBA,SAAgB,cACpCR,OAAO,EAD6B,CACnDS,UADmD,UACnDA,UADmD,eAE/BN,QAAQ,CAAC,EAAD,CAFuB,wCAEpDO,MAFoD,eAE5CC,SAF4C,eAI3DT,SAAS,CAAC,UAAM,CACdH,EAAE,CAACa,SAAH,CACGC,UADH,CACc,WADd,EAEGC,KAFH,CAES,UAFT,CAEqB,IAFrB,CAE2BP,QAF3B,EAGGQ,GAHH,GAIGC,IAJH,CAIQ,SAAAC,IAAI,CAAI,iBACZ,GAAMC,CAAAA,IAAI,cAAGD,IAAI,CAACE,IAAL,CAAU,CAAV,CAAH,sCAAG,YAAcD,IAAd,EAAb,CACA,GAAIA,IAAJ,SAAIA,IAAJ,iBAAIA,IAAI,CAAER,MAAV,CAAkB,CAChBC,SAAS,CAACO,IAAI,CAACR,MAAN,CAAT,CACD,CACF,CATH,EAUD,CAXQ,CAWN,CAACJ,IAAD,CAAOG,UAAP,CAAmBF,QAAnB,CAXM,CAAT,CAaA,MAAOG,CAAAA,MAAM,cACX,KAAC,KAAD,EAAO,SAAS,CAAEF,SAAS,EAAI,kBAA/B,CAAmD,GAAG,CAAEE,MAAxD,EADW,cAGX,YAAK,SAAS,CAAEF,SAAS,EAAI,cAA7B,UACGF,IAAI,CAACc,MAAL,CACEC,IADF,CACO,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,MAAF,CAAShB,QAAT,GAAsBE,UAAU,CAACe,QAArC,EADR,EAEED,MAFF,CAEShB,QAFT,CAEkB,CAFlB,EAEqBkB,WAFrB,EADH,EAHF,CASD,CA1BM","sourcesContent":["import { fb } from 'service';\r\nimport { useChat } from 'context';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Image } from 'semantic-ui-react';\r\n\r\nexport const ChatAvatar = ({ chat, username, className }) => {\r\n  const { chatConfig } = useChat();\r\n  const [avatar, setAvatar] = useState('');\r\n\r\n  useEffect(() => {\r\n    fb.firestore\r\n      .collection('chatUsers')\r\n      .where('userName', '==', username)\r\n      .get()\r\n      .then(snap => {\r\n        const data = snap.docs[0]?.data();\r\n        if (data?.avatar) {\r\n          setAvatar(data.avatar);\r\n        }\r\n      });\r\n  }, [chat, chatConfig, username]);\r\n\r\n  return avatar ? (\r\n    <Image className={className || 'chat-list-avatar'} src={avatar} />\r\n  ) : (\r\n    <div className={className || 'empty-avatar'}>\r\n      {chat.people\r\n        .find(p => p.person.username !== chatConfig.userName)\r\n        .person.username[0].toUpperCase()}\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}