{"ast":null,"code":"import _slicedToArray from\"F:/react/conversation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{useChat}from'context';import{useState,useRef}from'react';import{Icon}from'semantic-ui-react';import{sendMessage}from'react-chat-engine';import{ImageUpload}from'components';export var ChatInput=function ChatInput(){var _useChat=useChat(),chatConfig=_useChat.chatConfig,selectedChat=_useChat.selectedChat;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),chatInputText=_useState2[0],setChatInputText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imageModelOpen=_useState4[0],setImageModelOpen=_useState4[1];var inputRef=useRef(null);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var sendChatMessage=function sendChatMessage(){if(selectedChat&&chatInputText){setChatInputText('');sendMessage(chatConfig,selectedChat.id,{text:chatInputText,files:[]});}};var onFileAttach=function onFileAttach(file){setImage(file);setImageModelOpen(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-controls\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){var input=inputRef.current;if(input){input.value='';input.click();}},className:\"attachment-icon\",children:/*#__PURE__*/_jsx(Icon,{name:\"attach\",color:\"grey\"})}),/*#__PURE__*/_jsx(\"input\",{value:chatInputText,className:\"chat-input\",placeholder:\"send a message\",onKeyPress:function onKeyPress(e){if(e.key==='Enter'){sendChatMessage();}},onChange:function onChange(e){return setChatInputText(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{onClick:sendChatMessage,className:\"send-message-icon\",children:/*#__PURE__*/_jsx(Icon,{name:\"send\",color:\"green\"})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:inputRef,className:\"file-input\",accept:\"image/jpeg,image/png\",onChange:function onChange(e){var _e$target,_e$target$files;var file=(_e$target=e.target)===null||_e$target===void 0?void 0:(_e$target$files=_e$target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){onFileAttach(file);}}}),imageModelOpen&&!!image&&/*#__PURE__*/_jsx(ImageUpload,{file:image,onSubmit:function onSubmit(){sendMessage(chatConfig,selectedChat.id,{text:chatInputText,files:[image]},function(){setImage(null);setChatInputText('');});},close:function close(){return setImageModelOpen(false);}})]});};","map":{"version":3,"sources":["F:/react/conversation/src/components/ChatInput/ChatInput.jsx"],"names":["useChat","useState","useRef","Icon","sendMessage","ImageUpload","ChatInput","chatConfig","selectedChat","chatInputText","setChatInputText","imageModelOpen","setImageModelOpen","inputRef","image","setImage","sendChatMessage","id","text","files","onFileAttach","file","input","current","value","click","e","key","target"],"mappings":"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","sourcesContent":["import { useChat } from 'context';\r\nimport { useState, useRef } from 'react';\r\n\r\nimport { Icon } from 'semantic-ui-react';\r\nimport { sendMessage } from 'react-chat-engine';\r\nimport { ImageUpload } from 'components';\r\n\r\nexport const ChatInput = () => {\r\n  const { chatConfig, selectedChat } = useChat();\r\n  const [chatInputText, setChatInputText] = useState('');\r\n  const [imageModelOpen, setImageModelOpen] = useState(false);\r\n\r\n  const inputRef = useRef(null);\r\n  const [image, setImage] = useState();\r\n\r\n  const sendChatMessage = () => {\r\n    if (selectedChat && chatInputText) {\r\n      setChatInputText('');\r\n      sendMessage(chatConfig, selectedChat.id, {\r\n        text: chatInputText,\r\n        files: [],\r\n      });\r\n    }\r\n  };\r\n\r\n  const onFileAttach = file => {\r\n    setImage(file);\r\n    setImageModelOpen(true);\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"chat-controls\">\r\n        <div\r\n          onClick={() => {\r\n            const input = inputRef.current;\r\n            if (input) {\r\n              input.value = '';\r\n              input.click();\r\n            }\r\n          }}\r\n          className=\"attachment-icon\"\r\n        >\r\n          <Icon name=\"attach\" color=\"grey\" />\r\n        </div>\r\n\r\n        <input\r\n          value={chatInputText}\r\n          className=\"chat-input\"\r\n          placeholder=\"send a message\"\r\n          onKeyPress={e => {\r\n            if (e.key === 'Enter') {\r\n              sendChatMessage();\r\n            }\r\n          }}\r\n          onChange={e => setChatInputText(e.target.value)}\r\n        />\r\n\r\n        <div onClick={sendChatMessage} className=\"send-message-icon\">\r\n          <Icon name=\"send\" color=\"green\" />\r\n        </div>\r\n      </div>\r\n\r\n      <input\r\n        type=\"file\"\r\n        ref={inputRef}\r\n        className=\"file-input\"\r\n        accept=\"image/jpeg,image/png\"\r\n        onChange={e => {\r\n          const file = e.target?.files?.[0];\r\n          if (file) {\r\n            onFileAttach(file);\r\n          }\r\n        }}\r\n      />\r\n      {imageModelOpen && !!image && (\r\n        <ImageUpload\r\n          file={image}\r\n          onSubmit={() => {\r\n            sendMessage(\r\n              chatConfig,\r\n              selectedChat.id,\r\n              { text: chatInputText, files: [image] },\r\n              () => {\r\n                setImage(null);\r\n                setChatInputText('');\r\n              },\r\n            );\r\n          }}\r\n          close={() => setImageModelOpen(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}